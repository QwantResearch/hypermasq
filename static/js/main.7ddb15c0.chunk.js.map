{"version":3,"sources":["App.jsx","components/Notification/Notification.module.scss","assets/camera-square.svg","components/Avatar/Avatar.jsx","assets/close.svg","components/Modal/Modal.jsx","components/Notification/Notification.jsx","components/index.js","assets/user.png","modals/AddProfile/AddProfile.module.scss","actions/index.js","library/utils.js","containers/Login/Login.module.scss","containers/Sidebar/SidebarMin.module.scss","containers/Sidebar/SidebarMax.module.scss","serviceWorker.js","reducers/masq.js","reducers/notification.js","reducers/index.js","index.js","modals/Signup/Signup.module.scss","modals/Signup/Signup.jsx","modals/AuthApp/AuthApp.jsx","modals/QRCodeModal/QRCodeModal.jsx","assets/check-circle.svg","modals/SyncDevice/SyncDevice.jsx","modals/AddProfile/AddProfile.jsx","modals/PersistentStorageRequest/PersistentStorageRequest.jsx","modals/index.js","modals/SyncDevice/SyncDevice.module.scss","library/validators.js","modals/AuthApp/AuthApp.module.scss","assets/logo.svg","assets/background.svg","assets/plus-square.svg","assets/chevron.svg","containers/Login/Login.jsx","containers/Apps/Apps.jsx","assets/cards.svg","assets/phone.svg","assets/settings.svg","assets/logout.svg","containers/Sidebar/SidebarMin.jsx","containers/Sidebar/SidebarMax.jsx","containers/Sidebar/Sidebar.jsx","containers/Settings/Settings.jsx","containers/Devices/Devices.jsx","containers/index.js","containers/Settings/Settings.module.scss","containers/Devices/Devices.module.scss","modals/QRCodeModal/QRCodeModal.module.scss","modals/PersistentStorageRequest/PersistentStorageRequest.module.scss","containers/Apps/Apps.module.scss","library/masq.js"],"names":["history","createHashHistory","authenticatedRoutes","path","sidebar","Sidebar","main","Apps","Devices","Settings","App","_this","Object","_home_gbonneville_src_masq_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__","this","_home_gbonneville_src_masq_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__","_home_gbonneville_src_masq_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__","call","dbMasqPrivate","dbMasqPublic","dbs","sw","state","persistentStorageRequest","messages","hash","prevPath","processLink","bind","_home_gbonneville_src_masq_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8__","handlePersistentStorageRequestClose","DetectBrowser","detect","name","navigator","storage","persist","persisted","setState","console","log","concat","process","props","devices","length","_DetectBrowser$detect2","os","addDevice","string","charAt","toUpperCase","slice","description","color","listen","location","pathname","_this2","checkPersistentStorage","_this$props","setCurrentAppRequest","currentUser","window","substr","decoded","Buffer","from","_JSON$parse","JSON","parse","_JSON$parse2","_home_gbonneville_src_masq_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__","appId","channel","key","link","href","e","error","react__WEBPACK_IMPORTED_MODULE_9___default","a","createElement","react_router_dom__WEBPACK_IMPORTED_MODULE_12__","to","_this$props2","currentAppRequest","notification","react_router_dom__WEBPACK_IMPORTED_MODULE_13__","_components__WEBPACK_IMPORTED_MODULE_17__","_modals__WEBPACK_IMPORTED_MODULE_19__","onClose","appRequest","react_router_dom__WEBPACK_IMPORTED_MODULE_14__","exact","component","Login","style","display","map","route","index","Component","connect","masq","users","currentNotification","dispatch","device","app","module","exports","Notification","_extends","assign","target","i","arguments","source","prototype","hasOwnProperty","apply","camera_square_ref","react_default","fill","fillRule","height","opacity","rx","stroke","strokeWidth","width","x","y","d","camera_square_SvgCameraSquare","viewBox","Replace","__webpack_require__","p","_ref","size","image","onClick","upload","src","NewUpload","_ref2","className","Avatar","classCallCheck","possibleConstructorReturn","getPrototypeOf","openDialog","assertThisInitialized","refs","fileDialog","click","onChange","backgroundImage","type","ref","accept","Avatar_Replace","Avatar_NewUpload","React","defaultProps","close_extends","close_ref","x1","y1","x2","y2","close_ref2","close_SvgClose","strokeLinecap","strokeLinejoin","Modal","children","ResponsiveModal","react_responsive_default","maxWidth","Modal_Modal_Modal","minWidth","setNotification","notif","objectWithoutProperties","setTimeout","styles","__webpack_exports__","Avatar_Avatar_Avatar","components_Modal_Modal","AddProfile","Masq","setSyncStep","syncStep","signin","user","passphrase","openProfile","id","then","profile","signout","closeProfile","updateUser","update","objectSpread","updateProfile","signup","password","addProfile","fetchUsers","getProfiles","receiveUsers","fetchApps","getApps","apps","receiveApps","updateCurrentAppRequest","handleUserAppLogin","info","handleUserAppRegister","isAccepted","isConnected","isUsernameAlreadyTaken","compressImage","MAX_IMAGE_SIZE","compressorjs__WEBPACK_IMPORTED_MODULE_0__","username","ids","keys","localStorage","getItem","find","file","Promise","resolve","reject","Compressor","quality","convertSize","success","result","err","message","title","Logo","PlusSquare","passwordSection","goback","Background","header","nav","navElement","active","logout","Boolean","hostname","match","undefined","action","toConsumableArray","combineReducers","composeEnhancer","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","rootReducer","applyMiddleware","thunkMiddleware","render","react_redux_es","document","getElementById","serviceWorker","ready","registration","unregister","Signup","buttons","TextField","defaultAvatar","lastname","firstname","passwordConfirmation","currentStep","validationEnabled","refAvatar","createRef","next","finish","isValid","previous","handleKeyUp","fieldName","field","isName","isUsername","isPassword","event","value","trim","defineProperty","reader","FileReader","files","addEventListener","readAsDataURL","current","_this3","every","forceUpdate","onSignup","_this4","components","Fragment","onImageChange","paddingTop","secondary","label","paddingBottom","defaultValue","onKeyUp","getUsernameLabel","autoFocus","AuthApp","handleOk","handleRefuse","handleAccept","prevProps","react","minHeight","imageURL","renderText","renderButtons","QRCodeModal","querySelector","select","execCommand","QRCode","lib_default","marginBottom","readOnly","copyLink","check_circle_ref","points","check_circle_SvgCheckCircle","SyncDevice","handleOnClose","that","timer","setInterval","clearInterval","loader","renderSyncLink","renderSyncLoading","renderSyncComplete","step","onNewProfile","onSyncProfile","PermanentStorageRequest","PermanentStorage","modals_Signup_Signup","modals_AuthApp_AuthApp","modals_QRCodeModal_QRCodeModal","modals_SyncDevice_SyncDevice","modals_AddProfile_AddProfile","PersistentStorageRequest","str","test","appTitle","fillOpacity","logo_SvgLogo","background_extends","background_ref","_ref3","_ref4","background_SvgBackground","preserveAspectRatio","plus_square_extends","plus_square_ref","plus_square_ref2","xlinkHref","plus_square_SvgPlusSquare","chevron_extends","chevron_ref","chevron_SvgChevron","selectedUser","isWrongPassword","isModalOpened","isLoggedIn","sync","qrcodeModal","handleClickSyncProfile","handleClickNewProfile","handleClickNewUser","onPasswordChange","closeQRCodeModal","openQRCodeModal","onPasswordKeyUp","handleSignup","handleClose","goBack","_this$state2","modals","selectUser","transform","cursor","push","renderPassword","renderUsersSelection","Card","Redirect","PureComponent","cards_extends","cards_ref","cards_SvgCards","phone_extends","phone_ref","phone_SvgPhone","settings_extends","settings_ref","settings_SvgSettings","logout_extends","logout_ref","logout_SvgLogout","SidebarMin","NavLink","activeClassName","SidebarMax","Sidebar_SidebarMin","Sidebar_SidebarMax","hasChanged","validate","avatar","inputs","handleAddDeviceClick","renderSyncModal","handleSyncModalClosed","containers_Login_Login","containers_Apps_Apps","containers_Sidebar_Sidebar","containers_Settings_Settings","containers_Devices_Devices","titleContainer","fields","TextInput","button-container","parameters","appSettings","exportButton","common","encrypt","decrypt","importKey","exportKey","genAESKey","genEncryptedMasterKeyAndNonce","decryptMasterKeyAndNonce","genRandomBuffer","dbReady","createPromisifiedHyperDB","put","get","ERRORS","MasqError","checkObject","HUB_URLS","split","swarmOpts","requiredParametersDevice","requiredParametersApp","requiredParametersProfile","openOrCreateDB","_home_gbonneville_src_masq_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_4__","profileId","profileDB","appsDBs","swarms","hubs","hub","masterKey","peer","MISSING_PROFILE_ID","_getProtectedMK","protectedMK","nonce","INVALID_PASSPHRASE","_startReplicate","forEach","dbName","db","on","getAndDecrypt","_stopAllReplicates","USERNAME_ALREADY_TAKEN","uuidv4","publicProfile","privateProfile","putAsync","_setProfileToLocalStorage","_checkProfile","dec","_getProfilesFromLocalStorage","getProfile","updatedPrivateProfile","updatePublicProfile","encryptAndPut","_createResource","_getResources","_updateResource","rawKey","_home_gbonneville_src_masq_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__","_home_gbonneville_src_masq_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default","mark","_callee17","sendAuthorized","sendNotAuthorized","wrap","_context17","prev","sent","_callee11","userAppDbId","userAppDEK","profileImage","userAppNonce","data","encryptedMsg","_context11","msg","send","stringify","stop","_x16","_x17","_x18","_x19","_x20","_x21","_ref5","_callee12","_context12","_x22","signalhub","swarm","_callee13","_context13","_closeUserAppConnection","abrupt","DISCONNECTED_DURING_LOGIN","once","_ref7","_callee16","_context16","_ref8","_callee14","_context14","_x24","appDEK","appNonce","t0","_ref9","_callee15","json","_context15","_home_gbonneville_src_masq_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_1__","INVALID_DATA","_x25","_x23","_x14","_x15","isGranted","_ref10","_callee24","sendAccessRefused","sendAccessGranted","sendWriteAccessGranted","handleData","_context24","_ref11","_callee19","_context19","_x29","_ref12","_callee20","dbKey","_context20","_x30","_x31","_x32","_x33","_x34","_x35","_x36","_ref13","_callee21","_context21","_x37","_ref14","_callee22","userAppKey","_context22","authorizeAsync","AUTHORIZE_DB_KEY_FAILED","close","_x38","_x39","_genAppDEK","t1","_genNonce","t2","addApp","_callee23","_context23","toString","_x27","_x28","extractedKey","hexKey","ciphertext","decryptedMsg","plaintext","getAsync","res","node","_home_gbonneville_src_masq_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__","resourcePromises","_ref16","_callee32","val","_context32","_x45","all","resources","MISSING_RESOURCE_ID","setItem","discoveryKey","stream","replicate","live","pump","values","PROFILE_NOT_OPENED","_this5"],"mappings":"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","file":"static/js/main.7ddb15c0.chunk.js","sourcesContent":["import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { createHashHistory } from 'history'\nimport { Router, Route, Redirect } from 'react-router-dom'\nimport DetectBrowser from 'detect-browser'\n\nimport { Login, Apps, Devices, Settings, Sidebar } from './containers'\nimport { NotificationMasq } from './components'\nimport { addDevice, setCurrentAppRequest } from './actions'\nimport { AuthApp, PersistentStorageRequest } from './modals'\n\nconst history = createHashHistory()\n\nconst authenticatedRoutes = [\n  {\n    path: '/apps',\n    sidebar: Sidebar,\n    main: Apps\n  },\n  {\n    path: '/devices',\n    sidebar: Sidebar,\n    main: Devices\n  },\n  {\n    path: '/settings',\n    sidebar: Sidebar,\n    main: Settings\n  }\n]\n\nfunction capitalize (string) {\n  return string.charAt(0).toUpperCase() + string.slice(1)\n}\n\nclass App extends Component {\n  constructor () {\n    super()\n\n    this.dbMasqPrivate = null\n    this.dbMasqPublic = null\n    this.dbs = {} // all replicated dbs\n    this.sw = null\n\n    this.state = {\n      persistentStorageRequest: false,\n      messages: [],\n      hash: null,\n      prevPath: ''\n    }\n\n    this.processLink = this.processLink.bind(this)\n    this.handlePersistentStorageRequestClose = this.handlePersistentStorageRequestClose.bind(this)\n  }\n\n  async checkPersistentStorage () {\n    const { name } = DetectBrowser.detect()\n    if (name !== 'firefox') return\n\n    if (!navigator.storage || !navigator.storage.persist) return\n    const persistent = await navigator.storage.persisted()\n    if (persistent) { return }\n\n    this.setState({ persistentStorageRequest: true })\n    const p = await navigator.storage.persist()\n    if (p) {\n      this.setState({ persistentStorageRequest: false })\n    }\n  }\n\n  async componentDidMount () {\n    console.log(`Masq version: ${process.env.REACT_APP_GIT_SHA}`)\n\n    if (!this.props.devices.length) {\n      const { name, os } = DetectBrowser.detect()\n      this.props.addDevice({\n        name: `${capitalize(name)} sur ${os}`,\n        description: 'Cet appareil',\n        color: '#40ae6c'\n      })\n    }\n\n    history.listen(location => {\n      if (location.pathname !== this.state.prevPath) {\n        this.setState({\n          prevPath: history.location.pathname\n        })\n      }\n    })\n\n    this.checkPersistentStorage()\n  }\n\n  processLink () {\n    const { setCurrentAppRequest, currentUser } = this.props\n    const hash = window.location.hash.substr(7) // ignore #/link/ characters\n\n    if (!hash.length) return\n\n    const decoded = Buffer.from(hash, 'base64')\n\n    try {\n      const [ appId, msg, channel, key ] = JSON.parse(decoded) // eslint-disable-line\n      setCurrentAppRequest({ appId, channel, key, link: window.location.href })\n    } catch (e) {\n      console.error(e)\n    }\n\n    if (currentUser) {\n      return <Redirect to={this.state.prevPath} />\n    }\n\n    return <Redirect to='/' />\n  }\n\n  handlePersistentStorageRequestClose () {\n    this.setState({ persistentStorageRequest: false })\n  }\n\n  render () {\n    const { persistentStorageRequest } = this.state\n    const { currentUser, currentAppRequest, notification, setCurrentAppRequest } = this.props\n\n    return (\n      <Router history={history}>\n        <div>\n          {notification && <NotificationMasq {...notification} />}\n          {currentUser && currentAppRequest &&\n            <AuthApp\n              onClose={() => setCurrentAppRequest(null)}\n              appRequest={currentAppRequest}\n            />\n          }\n\n          {persistentStorageRequest && <PersistentStorageRequest onClose={this.handlePersistentStorageRequestClose} />}\n\n          <Route exact path='/link/:hash' component={this.processLink} />\n          <Route exact path='/' component={Login} />\n\n          <div style={{ display: 'flex' }}>\n            {authenticatedRoutes.map((route, index) => (\n              <Route\n                key={index}\n                path={route.path}\n                component={route.sidebar}\n              />\n            ))}\n\n            {authenticatedRoutes.map((route, index) => (\n              <Route\n                key={index}\n                path={route.path}\n                component={route.main}\n              />\n            ))}\n          </div>\n        </div>\n      </Router>\n    )\n  }\n}\n\nconst mapStateToProps = state => ({\n  currentAppRequest: state.masq.currentAppRequest,\n  currentUser: state.masq.currentUser,\n  devices: state.masq.devices,\n  users: state.masq.users,\n  notification: state.notification.currentNotification\n})\n\nconst mapDispatchToProps = dispatch => ({\n  addDevice: device => dispatch(addDevice(device)),\n  setCurrentAppRequest: app => dispatch(setCurrentAppRequest(app))\n})\n\nApp.propTypes = {\n  currentUser: PropTypes.object,\n  currentAppRequest: PropTypes.object,\n  setCurrentAppRequest: PropTypes.func,\n  addDevice: PropTypes.func,\n  devices: PropTypes.arrayOf(PropTypes.object),\n  notification: PropTypes.object\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App)\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Notification\":\"Notification_Notification__EKD6n\"};","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from \"react\";\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  fill: \"none\",\n  fillRule: \"evenodd\"\n}, React.createElement(\"rect\", {\n  height: 118,\n  opacity: 0.5,\n  rx: 10,\n  stroke: \"#999\",\n  strokeWidth: 2,\n  width: 118,\n  x: 1,\n  y: 1\n}), React.createElement(\"path\", {\n  d: \"m77.2 46.6h-6.5333333l-3.1733334-4.8533333c-.3733333-.3733334-.9333333-.7466667-1.4933333-.7466667h-11.2c-.56 0-1.12.3733333-1.4933333.7466667l-3.1733334 4.8533333h-6.5333333c-3.1733333 0-5.6 2.4266667-5.6 5.6v20.5333333c0 3.1733334 2.4266667 5.6 5.6 5.6h33.6c3.1733333 0 5.6-2.4266666 5.6-5.6v-20.5333333c0-3.1733333-2.4266667-5.6-5.6-5.6zm1.8666667 26.1333333c0 1.12-.7466667 1.8666667-1.8666667 1.8666667h-33.6c-1.12 0-1.8666667-.7466667-1.8666667-1.8666667v-20.5333333c0-1.12.7466667-1.8666667 1.8666667-1.8666667h7.4666667c.56 0 1.12-.3733333 1.4933333-.7466666l3.1733333-4.8533334h9.1466667l3.1733333 4.8533334c.56.3733333 1.12.7466666 1.68.7466666h7.4666667c1.12 0 1.8666667.7466667 1.8666667 1.8666667zm-18.6666667-20.5333333c-5.2266667 0-9.3333333 4.1066667-9.3333333 9.3333333 0 5.2266667 4.1066666 9.3333334 9.3333333 9.3333334s9.3333333-4.1066667 9.3333333-9.3333334c0-5.2266666-4.1066666-9.3333333-9.3333333-9.3333333zm0 14.9333333c-3.1733333 0-5.6-2.4266666-5.6-5.6 0-3.1733333 2.4266667-5.6 5.6-5.6s5.6 2.4266667 5.6 5.6c0 3.1733334-2.4266667 5.6-5.6 5.6z\",\n  fill: \"#ccc\",\n  fillRule: \"nonzero\"\n}));\n\nvar SvgCameraSquare = function SvgCameraSquare(props) {\n  return React.createElement(\"svg\", _extends({\n    height: 120,\n    viewBox: \"0 0 120 120\",\n    width: 120\n  }, props), _ref);\n};\n\nexport default __webpack_public_path__ + \"static/media/camera-square.75a605b6.svg\";\nexport { SvgCameraSquare as ReactComponent };","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Avatar as AvatarBase } from 'qwant-research-components'\n\nimport { ReactComponent as CameraSquare } from '../../assets/camera-square.svg'\n\nimport './Avatar.css'\n\nconst Replace = ({ size, image, onClick }) =>\n  <AvatarBase upload src={image} width={size} height={size} onClick={onClick} />\n\nReplace.propTypes = {\n  size: PropTypes.number,\n  image: PropTypes.string.isRequired,\n  onClick: PropTypes.func\n}\n\nconst NewUpload = ({ style, onClick }) => (\n  <CameraSquare\n    className='Avatar upload'\n    color='var(--grey-200)'\n    style={style}\n    onClick={onClick}\n  />\n)\n\nNewUpload.propTypes = {\n  style: PropTypes.object,\n  onClick: PropTypes.func\n}\n\nexport default class Avatar extends React.Component {\n  constructor (props) {\n    super(props)\n    this.openDialog = this.openDialog.bind(this)\n  }\n\n  openDialog () {\n    this.refs.fileDialog.click()\n  }\n\n  render () {\n    const { size, image, upload, onChange } = this.props\n    const style = { backgroundImage: 'url(' + image + ')' }\n\n    if (upload) {\n      return (\n        <div>\n          <input name='avatar' type='file' ref='fileDialog'\n            style={{ display: 'none' }} onChange={onChange}\n            accept='.jpg, .jpeg, .png'\n          />\n\n          {image\n            ? <Replace size={size} image={image} onClick={this.openDialog} />\n            : <NewUpload style={style} onClick={this.openDialog} />\n          }\n        </div>)\n    }\n\n    return <AvatarBase src={image} width={size} height={size} />\n  }\n}\n\nAvatar.defaultProps = {\n  size: 120\n}\n\nAvatar.propTypes = {\n  size: PropTypes.number,\n  upload: PropTypes.bool,\n  image: PropTypes.string,\n  onChange: PropTypes.func\n}\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from \"react\";\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"line\", {\n  x1: 18,\n  y1: 6,\n  x2: 6,\n  y2: 18\n});\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"line\", {\n  x1: 6,\n  y1: 6,\n  x2: 18,\n  y2: 18\n});\n\nvar SvgClose = function SvgClose(props) {\n  return React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    stroke: \"currentColor\",\n    strokeWidth: 2,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    className: \"feather feather-x\"\n  }, props), _ref, _ref2);\n};\n\nexport default __webpack_public_path__ + \"static/media/close.349ea360.svg\";\nexport { SvgClose as ReactComponent };","import React from 'react'\nimport PropTypes from 'prop-types'\nimport MediaQuery from 'react-responsive'\n\nimport { ReactComponent as Close } from '../../assets/close.svg'\n\nimport './Modal.scss'\n\nconst Modal = ({ onClose, width, height, children }) => (\n  <div className='Modal'>\n    <div className='overlay' onClick={onClose} />\n    <div className='modal' style={{ width, height }}>\n      {onClose && <Close className='close' width={16} height={16} onClick={onClose} />}\n      {children}\n    </div>\n  </div>\n)\n\nconst ResponsiveModal = ({ onClose, width, height, children }) => (\n  <div>\n    <MediaQuery maxWidth={800}>\n      <Modal width='100%' onClose={onClose} height={height} children={children} />\n    </MediaQuery>\n    <MediaQuery minWidth={801}>\n      <Modal width={width} onClose={onClose} height={height} children={children} />\n    </MediaQuery>\n  </div>\n)\n\nModal.propTypes =\nResponsiveModal.propTypes = {\n  onClose: PropTypes.func,\n  width: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.number\n  ]),\n  height: PropTypes.number,\n  children: PropTypes.object\n}\n\nexport default ResponsiveModal\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Notification } from 'qwant-research-components'\nimport { connect } from 'react-redux'\n\nimport { setNotification } from '../../actions/index'\n\nimport styles from './Notification.module.scss'\n\nconst TIMEOUT = 5000\n\nconst NotificationMasq = ({ setNotification, ...props }) => {\n  setTimeout(() => setNotification(null), TIMEOUT)\n\n  return (\n    <div className={styles.Notification}>\n      <Notification {...props} onClose={() => setNotification(null)} />\n    </div>\n  )\n}\n\nconst mapDispatchToProps = dispatch => ({\n  setNotification: notif => dispatch(setNotification(notif))\n})\n\nNotificationMasq.propTypes = {\n  setNotification: PropTypes.func\n}\n\nexport default connect(null, mapDispatchToProps)(NotificationMasq)\n","export { default as Avatar } from './Avatar'\nexport { default as Modal } from './Modal'\nexport { default as NotificationMasq } from './Notification'\n","module.exports = \"data:image/png;base64,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\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"AddProfile\":\"AddProfile_AddProfile__2W1Tu\"};","import { Masq } from '../library'\n\nconst masq = new Masq()\n\nconst receiveUsers = users => ({\n  type: 'RECEIVE_USERS',\n  users\n})\n\nconst receiveApps = apps => ({\n  type: 'RECEIVE_APPS',\n  apps\n})\n\nexport const setSyncStep = syncStep => {\n  return {\n    type: 'SET_SYNC_STEP',\n    syncStep\n  }\n}\n\nexport const signin = (user, passphrase) => {\n  return function (dispatch) {\n    return masq.openProfile(user.id, passphrase)\n      .then(profile => dispatch({\n        type: 'SIGNIN',\n        profile\n      }))\n  }\n}\n\nexport const signout = () => {\n  return function (dispatch) {\n    return masq.closeProfile()\n      .then(() => dispatch({\n        type: 'SIGNOUT'\n      }))\n  }\n}\n\nexport const updateUser = (id, update) => {\n  const profile = { ...update, id }\n  return function (dispatch) {\n    return masq.updateProfile(profile)\n      .then(() => dispatch({\n        type: 'SIGNIN',\n        profile\n      }))\n  }\n}\n\nexport const signup = user => {\n  const { password } = user\n  return function (dispatch) {\n    return masq.addProfile(user)\n      .then((profile) => dispatch(signin(profile, password)))\n  }\n}\n\nexport const fetchUsers = () => {\n  return function (dispatch) {\n    return masq.getProfiles()\n      .then(users => dispatch(receiveUsers(users)))\n  }\n}\n\nexport const addDevice = device => ({\n  type: 'ADD_DEVICE',\n  device\n})\n\nexport const fetchApps = () => {\n  return function (dispatch) {\n    return masq.getApps()\n      .then(apps => dispatch(receiveApps(apps)))\n  }\n}\n\nexport const fetchCurrentAppRequestStatus = () => ({\n  type: 'FETCH_CURRENT_APP_REQUEST_STATUS'\n})\n\nexport const setCurrentAppRequest = app => {\n  return {\n    type: 'SET_CURRENT_APP_REQUEST',\n    app\n  }\n}\n\nexport const updateCurrentAppRequest = update => {\n  return {\n    type: 'UPDATE_CURRENT_APP_REQUEST',\n    update\n  }\n}\n\nexport const handleUserAppLogin = (channel, key, appId) => {\n  return function (dispatch) {\n    return masq.handleUserAppLogin(channel, key, appId)\n      .then((info) => dispatch(updateCurrentAppRequest({\n        ...info\n      })))\n  }\n}\n\nexport const handleUserAppRegister = (isAccepted) => {\n  return function (dispatch) {\n    return masq.handleUserAppRegister(isAccepted)\n      .then(() => dispatch(updateCurrentAppRequest({\n        isConnected: isAccepted\n      })))\n  }\n}\n\nexport const setNotification = (notification) => ({\n  type: 'SET_NOTIFICATION',\n  notification\n})\n","import Compressor from 'compressorjs'\n\nconst MAX_IMAGE_SIZE = 100000 // 100 KB\n\nconst isUsernameAlreadyTaken = (username, id) => {\n  const ids = Object.keys(window.localStorage)\n  if (!ids) return false\n\n  const publicProfiles = ids.map(id => JSON.parse(window.localStorage.getItem(id)))\n\n  return publicProfiles.find(p =>\n    (id && p.id === id) ? false : p.username === username\n  )\n}\n\nconst compressImage = (file) => {\n  return new Promise((resolve, reject) => {\n    const image = new Compressor(file, { // eslint-disable-line no-unused-vars\n      quality: 0.8,\n      width: 512,\n      height: 512,\n      convertSize: 0,\n      success (result) {\n        resolve(result)\n      },\n      error (err) {\n        reject(err.message)\n      }\n    })\n  })\n}\n\nexport { isUsernameAlreadyTaken, compressImage, MAX_IMAGE_SIZE }\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Login\":\"Login_Login__wfqrh\",\"title\":\"Login_title__3eXjA\",\"Logo\":\"Login_Logo__2J8VH\",\"users\":\"Login_users__HBP7A\",\"PlusSquare\":\"Login_PlusSquare__2_U-f\",\"user\":\"Login_user__cxBIE\",\"passwordSection\":\"Login_passwordSection__35nng\",\"goback\":\"Login_goback__2BJCC\",\"Background\":\"Login_Background__1QUKU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Sidebar\":\"SidebarMin_Sidebar__3h9o-\",\"header\":\"SidebarMin_header__GHWkr\",\"nav\":\"SidebarMin_nav__3R2ys\",\"navElement\":\"SidebarMin_navElement__2Vdh4\",\"active\":\"SidebarMin_active__1LV9H\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Sidebar\":\"SidebarMax_Sidebar__1ysrI\",\"header\":\"SidebarMax_header__eH_Yh\",\"nav\":\"SidebarMax_nav__2MKjH\",\"navElement\":\"SidebarMax_navElement__1aSms\",\"active\":\"SidebarMax_active__20Dpw\",\"logout\":\"SidebarMax_logout__32EVd\"};","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n)\n\nexport function register (config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location)\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config)\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          )\n        })\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl, config)\n      }\n    })\n  }\n}\n\nfunction registerValidSW (swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.')\n\n              // Execute callback\n              if (config.onUpdate) {\n                config.onUpdate(registration)\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.')\n\n              // Execute callback\n              if (config.onSuccess) {\n                config.onSuccess(registration)\n              }\n            }\n          }\n        }\n      }\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error)\n    })\n}\n\nfunction checkValidServiceWorker (swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  window.fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload()\n          })\n        })\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config)\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      )\n    })\n}\n\nexport function unregister () {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister()\n    })\n  }\n}\n","const masq = (state = {\n  syncStep: 0,\n  users: [],\n  apps: [],\n  devices: [],\n  currentUser: null,\n  currentAppRequest: null\n}, action) => {\n  switch (action.type) {\n    case 'SIGNIN':\n      return { ...state, currentUser: action.profile }\n    case 'SIGNOUT':\n      return { ...state, currentUser: null }\n    case 'RECEIVE_USERS':\n      return { ...state, users: action.users }\n    case 'RECEIVE_APPS':\n      return { ...state, apps: action.apps }\n    case 'SET_CURRENT_APP_REQUEST':\n      return { ...state, currentAppRequest: action.app }\n    case 'UPDATE_CURRENT_APP_REQUEST':\n      return { ...state, currentAppRequest: { ...state.currentAppRequest, ...action.update } }\n    case 'ADD_APP':\n      return { ...state, apps: [...state.apps, action.app] }\n    case 'ADD_DEVICE':\n      return { ...state, devices: [...state.devices, action.device] }\n    case 'SET_SYNC_STEP':\n      return { ...state, syncStep: action.syncStep }\n    default:\n      return state\n  }\n}\n\nexport default masq\n","const notification = (state = {\n  currentNotification: null // { title: 'test', error: true }\n}, action) => {\n  switch (action.type) {\n    case 'SET_NOTIFICATION':\n      return {\n        ...state,\n        currentNotification: action.notification\n      }\n    default:\n      return state\n  }\n}\n\nexport default notification\n","import { combineReducers } from 'redux'\nimport masq from './masq'\nimport notification from './notification'\n\nexport default combineReducers({\n  masq,\n  notification\n})\n","import React from 'react'\nimport { render } from 'react-dom'\nimport { createStore, applyMiddleware, compose } from 'redux'\nimport thunkMiddleware from 'redux-thunk'\nimport { Provider } from 'react-redux'\n\nimport * as serviceWorker from './serviceWorker'\nimport rootReducer from './reducers'\nimport App from './App'\n\nimport './styles/index.scss'\nimport 'typeface-asap'\n\nconst composeEnhancer = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose\n\nconst store = createStore(\n  rootReducer,\n  composeEnhancer(applyMiddleware(thunkMiddleware))\n)\n\nrender(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister()\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Signup\":\"Signup_Signup__2YyBN\",\"title\":\"Signup_title__iRIvM\",\"user\":\"Signup_user__1BFZq\",\"buttons\":\"Signup_buttons__2IjiQ\",\"TextField\":\"Signup_TextField__33SKF\"};","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Button, TextField } from 'qwant-research-components'\nimport { connect } from 'react-redux'\n\nimport { setNotification } from '../../actions'\nimport { Avatar, Modal } from '../../components'\nimport { isName, isUsername, isPassword } from '../../library/validators'\nimport { isUsernameAlreadyTaken, compressImage, MAX_IMAGE_SIZE } from '../../library/utils'\nimport defaultAvatar from '../../assets/user.png'\n\nimport styles from './Signup.module.scss'\n\nclass Signup extends React.Component {\n  constructor (props) {\n    super(props)\n\n    this.state = {\n      image: defaultAvatar,\n      lastname: '',\n      firstname: '',\n      username: '',\n      password: '',\n      passwordConfirmation: ''\n    }\n\n    this.currentStep = 0\n    this.validationEnabled = false\n    this.refAvatar = React.createRef()\n\n    this.next = this.next.bind(this)\n    this.finish = this.finish.bind(this)\n    this.isValid = this.isValid.bind(this)\n    this.previous = this.previous.bind(this)\n    this.openDialog = this.openDialog.bind(this)\n    this.handleKeyUp = this.handleKeyUp.bind(this)\n  }\n\n  isValid (fieldName) {\n    const field = this.state[fieldName]\n\n    if (!this.validationEnabled) {\n      // Don't show error as long as the user does not click Finish btn\n      return true\n    }\n\n    switch (fieldName) {\n      case 'image': return true\n      case 'firstname': return isName(field)\n      case 'lastname': return isName(field)\n      case 'username': return isUsername(field) && !isUsernameAlreadyTaken(field)\n      case 'password': return isPassword(field)\n      case 'passwordConfirmation': return field === this.state.password\n      default: return false\n    }\n  }\n\n  getUsernameLabel (...labels) {\n    const username = this.state['username']\n\n    if (this.isValid('username')) {\n      return labels[0]\n    }\n\n    return isUsernameAlreadyTaken(username) ? labels[1] : labels[2]\n  }\n\n  onChange (field, event) {\n    const value = event.target.value.trim()\n    this.setState({\n      [field]: value\n    })\n  }\n\n  async onImageChange (event) {\n    const { setNotification } = this.props\n    const reader = new window.FileReader()\n    const file = event.target.files[0]\n    if (!file) {\n      return\n    }\n\n    const image = await compressImage(file)\n    if (image.size > MAX_IMAGE_SIZE) {\n      setNotification({ title: 'L\\'image sélectionnée est trop lourde. Veuillez en choisir une autre.', error: true })\n      return\n    }\n\n    reader.addEventListener('load', () => {\n      this.setState({ image: reader.result })\n    })\n\n    reader.readAsDataURL(image)\n  }\n\n  openDialog () {\n    this.refAvatar.current.openDialog()\n  }\n\n  next () {\n    const fieldsToValidate = ['lastname', 'firstname', 'username']\n    this.validationEnabled = true\n\n    const isValid = fieldsToValidate.every(key => this.isValid(key))\n\n    // If invalid, return\n    if (!isValid) {\n      // forceUpdate to show errors\n      return this.forceUpdate()\n    }\n\n    this.validationEnabled = false // do not display error on the next step for now\n    this.currentStep++\n    this.forceUpdate()\n  }\n\n  previous () {\n    this.currentStep--\n    this.forceUpdate()\n  }\n\n  finish () {\n    const { onSignup } = this.props\n    this.validationEnabled = true\n\n    if (!this.isValid('password') || !this.isValid('passwordConfirmation')) {\n      // forceUpdate to show errors\n      return this.forceUpdate()\n    }\n\n    onSignup(this.state)\n  }\n\n  handleKeyUp (e) {\n    if (e.key !== 'Enter') {\n      return\n    }\n\n    if (this.currentStep === 0) {\n      this.next()\n    } else {\n      this.finish()\n    }\n  }\n\n  render () {\n    return (\n      <Modal onClose={this.props.onClose} height={650} width={511}>\n        <div className={styles.Signup}>\n          <span className={styles.title}>Ajouter un nouvel utilisateur</span>\n\n          {this.currentStep === 0 && (\n            <React.Fragment>\n              <Avatar\n                size={120}\n                upload\n                ref={this.refAvatar}\n                onChange={(e) => this.onImageChange(e)}\n                image={this.state.image || null}\n              />\n\n              <div style={{ paddingTop: 24 }} />\n              <Button secondary label='Importer une photo' onClick={this.openDialog} />\n              <div style={{ paddingBottom: 32 }} />\n\n              <TextField\n                className={styles.TextField}\n                defaultValue={this.state.lastname}\n                label={this.isValid('lastname')\n                  ? 'Nom (facultatif)'\n                  : 'Le nom ne peut contenir que des caractères alphanumériques et des espaces.'}\n                error={!this.isValid('lastname')}\n                onChange={(e) => this.onChange('lastname', e)}\n              />\n              <TextField\n                className={styles.TextField}\n                defaultValue={this.state.firstname}\n                label={this.isValid('firstname')\n                  ? 'Prénom (facultatif)'\n                  : 'Le prénom ne peut contenir que des caractères alphanumériques et des espaces.'}\n                error={!this.isValid('firstname')}\n                onChange={(e) => this.onChange('firstname', e)}\n              />\n              <TextField\n                className={styles.TextField}\n                defaultValue={this.state.username}\n                error={!this.isValid('username')}\n                onChange={(e) => this.onChange('username', e)}\n                onKeyUp={this.handleKeyUp}\n                label={this.getUsernameLabel(\n                  'Pseudo (affiché)',\n                  'Pseudo déjà utilisé. Veuillez en choisir un autre.',\n                  'Le pseudo ne doit pas contenir d\\'espaces, et peut contenir les caractères spéciaux suivants: !?$#@()-*'\n                )}\n              />\n\n              <div className={styles.buttons}>\n                <Button label='Suivant' onClick={this.next} width={185} />\n              </div>\n            </React.Fragment>\n          )}\n\n          {this.currentStep === 1 && (\n            <React.Fragment>\n              <Avatar\n                size={120}\n                image={this.state.image}\n                firstname={this.state.firstname}\n                lastname={this.state.lastname}\n              />\n              <p className={styles.user}>{this.state.username}</p>\n              <TextField\n                className={styles.TextField}\n                autoFocus\n                type='password'\n                label={this.isValid('password')\n                  ? 'Mot de passe'\n                  : 'Le mot de passe doit être composé d\\'au moins 8 caractères, et contenir au moins un chiffre et un caractère spécial (!?$#@()-*)'}\n                error={!this.isValid('password')}\n                onChange={(e) => this.onChange('password', e)}\n              />\n\n              <TextField\n                className={styles.TextField}\n                type='password'\n                label={this.isValid('passwordConfirmation')\n                  ? 'Mot de passe (confirmation)'\n                  : 'Les mots de passe ne correspondent pas.'}\n                error={!this.isValid('passwordConfirmation')}\n                onKeyUp={this.handleKeyUp}\n                onChange={(e) => this.onChange('passwordConfirmation', e)}\n              />\n\n              <div className={styles.buttons}>\n                <Button label='Précédent' onClick={this.previous} width={185} />\n                <Button label='Terminer' onClick={this.finish} width={185} />\n              </div>\n            </React.Fragment>\n          )}\n        </div>\n      </Modal>\n    )\n  }\n}\n\nSignup.propTypes = {\n  onSignup: PropTypes.func,\n  onClose: PropTypes.func,\n  setNotification: PropTypes.func\n}\n\nconst mapDispatchToProps = dispatch => ({\n  setNotification: (notif) => dispatch(setNotification(notif))\n})\n\nexport default connect(null, mapDispatchToProps)(Signup)\n","import React, { Fragment } from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { Button, Loader, Card } from 'qwant-research-components'\n\nimport { Modal } from '../../components'\nimport { handleUserAppLogin, handleUserAppRegister, setCurrentAppRequest, fetchApps } from '../../actions'\n\nimport styles from './AuthApp.module.scss'\n\nclass AuthApp extends React.Component {\n  constructor (props) {\n    super(props)\n    this.handleOk = this.handleOk.bind(this)\n    this.handleRefuse = this.handleRefuse.bind(this)\n    this.handleAccept = this.handleAccept.bind(this)\n  }\n\n  async componentDidMount () {\n    const { channel, key, appId } = this.props.appRequest\n    await this.props.handleUserAppLogin(channel, key, appId)\n  }\n\n  async componentDidUpdate (prevProps) {\n    if (prevProps.appRequest.channel === this.props.appRequest.channel) {\n      return\n    }\n\n    // Another appRequest has been received\n    const { channel, key, appId } = this.props.appRequest\n    await this.props.handleUserAppLogin(channel, key, appId)\n  }\n\n  async handleRefuse () {\n    await this.props.handleUserAppRegister(false)\n    await this.props.setCurrentAppRequest(null)\n    this.props.onClose()\n  }\n\n  async handleAccept () {\n    await this.props.handleUserAppRegister(true)\n    await this.props.fetchApps() // The apps may be added\n  }\n\n  async handleOk () {\n    // remove the app request\n    await this.props.setCurrentAppRequest(null)\n  }\n\n  renderButtons () {\n    const { appRequest } = this.props\n\n    if (appRequest.isConnected === false) {\n      return (\n        <Fragment>\n          <Button label={'Refuser'} onClick={this.handleRefuse} color='#e53b5b' />\n          <Button label={'Valider'} onClick={this.handleAccept} color='#40ae6c' />\n        </Fragment>\n      )\n    }\n\n    if (appRequest.isConnected) {\n      return <Button label={'OK'} onClick={this.handleOk} color='#40ae6c' />\n    }\n\n    return <Loader />\n  }\n\n  renderText () {\n    const { appRequest } = this.props\n\n    if (appRequest.isConnected === false) {\n      return (\n        <div>\n          <Card minHeight={64} title={appRequest.name} image={appRequest.imageURL} color='#a3005c' description={appRequest.description} />\n          <p className={styles.description}>\n          Cette application demande un accès à votre stockage Masq.\n          </p>\n          <p className={styles.description}>\n          Si vous n’êtes pas à l’origine de cette demande, veuillez refuser cette requête.\n          </p>\n        </div>\n      )\n    } else {\n      return (\n        <div>\n          <p className={styles.description}>\n          Vous avez autorisé l'application à accéder à votre stockage Masq.\n          </p>\n          <p className={styles.description}>\n          Vous pouvez désormais utiliser l'application.\n          </p>\n        </div>\n      )\n    }\n  }\n\n  render () {\n    const { appRequest } = this.props\n    const { isConnected } = appRequest\n\n    return (\n      <Modal width={511} height={isConnected === false ? 550 : 400}>\n        <div className={styles.AuthApp}>\n          <p className={styles.title}>Nouvelle requête de connexion de:</p>\n          {this.renderText()}\n\n          <div className={styles.buttons}>\n            {this.renderButtons()}\n          </div>\n        </div>\n      </Modal>\n    )\n  }\n}\n\nAuthApp.propTypes = {\n  handleUserAppRegister: PropTypes.func.isRequired,\n  handleUserAppLogin: PropTypes.func.isRequired,\n  setCurrentAppRequest: PropTypes.func.isRequired,\n  fetchApps: PropTypes.func.isRequired,\n  appRequest: PropTypes.object.isRequired,\n  onClose: PropTypes.func\n}\n\nconst mapStateToProps = state => ({\n  currentUser: state.masq.currentUser\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  handleUserAppLogin: (channel, key, appId) => dispatch(handleUserAppLogin(channel, key, appId)),\n  handleUserAppRegister: (isAccepted) => dispatch(handleUserAppRegister(isAccepted)),\n  setCurrentAppRequest: (app) => dispatch(setCurrentAppRequest(app)),\n  fetchApps: () => dispatch(fetchApps())\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AuthApp)\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { Button } from 'qwant-research-components'\nimport QRCode from 'qrcode.react'\n\nimport { Modal } from '../../components'\n\nimport styles from './QRCodeModal.module.scss'\n\nclass QRCodeModal extends Component {\n  copyLink () {\n    const link = document.querySelector('input')\n    link.select()\n    document.execCommand('copy')\n  }\n\n  render () {\n    const { onClose, currentAppRequest } = this.props\n\n    return (\n      <Modal height={540} width={511} onClose={onClose}>\n        <div className={styles.QRCode}>\n          <p className={styles.title}>Connexion avec un autre appareil</p>\n          <p className={styles.description}>\n            Scannez le QRCode suivant sur votre téléphone, ou copiez le lien suivant sur un autre appareil pour vous connecter depuis celui-ci.\n          </p>\n          <QRCode value={currentAppRequest.link} style={{ marginBottom: 16 }} />\n          <input id='link' readOnly defaultValue={currentAppRequest.link} />\n          <Button label='Copier' onClick={this.copyLink} />\n        </div>\n      </Modal>\n    )\n  }\n}\n\nQRCodeModal.propTypes = {\n  onClose: PropTypes.func,\n  currentAppRequest: PropTypes.object\n}\n\nconst mapStateToProps = state => ({\n  currentAppRequest: state.masq.currentAppRequest\n})\n\nexport default connect(mapStateToProps)(QRCodeModal)\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from \"react\";\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M22 11.08V12a10 10 0 1 1-5.93-9.14\"\n});\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"polyline\", {\n  points: \"22 4 12 14.01 9 11.01\"\n});\n\nvar SvgCheckCircle = function SvgCheckCircle(props) {\n  return React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    stroke: \"currentColor\",\n    strokeWidth: 2,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    className: \"feather feather-check-circle\"\n  }, props), _ref, _ref2);\n};\n\nexport default __webpack_public_path__ + \"static/media/check-circle.ce63c045.svg\";\nexport { SvgCheckCircle as ReactComponent };","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Button, Loader } from 'qwant-research-components'\nimport { connect } from 'react-redux'\n\nimport { setSyncStep } from '../../actions'\nimport { Modal } from '../../components'\nimport { ReactComponent as CheckCircle } from '../../assets/check-circle.svg'\n\nimport styles from './SyncDevice.module.scss'\n\nclass SyncDevice extends React.Component {\n  constructor (props) {\n    super(props)\n    this.handleOnClose = this.handleOnClose.bind(this)\n  }\n\n  componentDidMount () {\n    const that = this\n    const timer = setInterval(() => {\n      that.props.setSyncStep(that.props.syncStep + 1)\n      if (that.props.syncStep === 2) clearInterval(timer)\n    }, 3000)\n  }\n\n  copyLink () {\n    const link = document.querySelector('input')\n    link.select()\n    document.execCommand('copy')\n  }\n\n  handleOnClose () {\n    this.props.setSyncStep(0) // Reset syncStep\n    this.props.onClose()\n  }\n\n  renderSyncLink () {\n    return (\n      <Modal height={370} width={511} onClose={this.handleOnClose}>\n        <div className={styles.SyncDevice}>\n          <p className={styles.title}>Ajouter un appareil</p>\n          <p className={styles.description}>\n            Copiez-collez le lien suivant pour synchroniser votre profil et vos applications avec un autre appareil.\n          </p>\n          <input id='link' readOnly defaultValue='qwa.nt/0BJ8ZX' />\n          <Button label='Copier' onClick={this.copyLink} />\n        </div>\n      </Modal>\n    )\n  }\n\n  renderSyncLoading () {\n    return (\n      <Modal height={370} width={511} onClose={this.handleOnClose}>\n        <div className={styles.SyncDevice}>\n          <p className={styles.title}>Ajouter un appareil</p>\n          <p className={styles.description}>Synchronisation en cours, veuillez patienter...</p>\n          <div className={styles.loader}>\n            <Loader />\n          </div>\n        </div>\n      </Modal>\n    )\n  }\n  renderSyncComplete () {\n    return (\n      <Modal height={370} width={511} onClose={this.handleOnClose}>\n        <div className={styles.SyncDevice}>\n          <CheckCircle width={160} height={160} color='#40ae6c' />\n          <p className={styles.description}>Synchronisation terminée. Vous pouvez maintenant vous connecter</p>\n          <Button label='OK' onClick={this.handleOnClose} />\n        </div>\n      </Modal>\n    )\n  }\n\n  render () {\n    const { syncStep } = this.props\n    return (\n      <div>\n        {/* <Notification style={{ position: 'relative' }} title='Lien copié dans le presse-papier' /> */}\n        { syncStep === 0 && this.renderSyncLink() }\n        { syncStep === 1 && this.renderSyncLoading() }\n        { syncStep === 2 && this.renderSyncComplete() }\n      </div>\n    )\n  }\n}\n\nSyncDevice.propTypes = {\n  onClose: PropTypes.func.isRequired,\n  setSyncStep: PropTypes.func.isRequired,\n  syncStep: PropTypes.number\n}\n\nconst mapStateToProps = state => ({\n  syncStep: state.masq.syncStep\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  setSyncStep: (step) => dispatch(setSyncStep(step))\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SyncDevice)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Button } from 'qwant-research-components'\n\nimport { Modal } from '../../components'\n\nimport styles from './AddProfile.module.scss'\n\nconst AddProfile = ({ onClose, onNewProfile, onSyncProfile }) => (\n  <Modal height={370} width={511} onClose={onClose}>\n    <div className={styles.AddProfile}>\n      <Button label='Nouveau profil' onClick={onNewProfile} />\n      <Button secondary label='Synchroniser un profil existant (bientôt)' />\n    </div>\n  </Modal>\n)\n\nAddProfile.propTypes = {\n  onClose: PropTypes.func.isRequired,\n  onNewProfile: PropTypes.func,\n  onSyncProfile: PropTypes.func\n}\n\nexport default AddProfile\n","import React from 'react'\nimport { Button } from 'qwant-research-components'\nimport PropTypes from 'prop-types'\n\nimport { Modal } from '../../components'\n\nimport styles from './PersistentStorageRequest.module.scss'\n\nconst PermanentStorageRequest = ({ onClose }) => (\n  <Modal height={330} width={511} onClose={onClose}>\n    <div className={styles.PermanentStorage}>\n      <span className={styles.title}>Autorisation de stockage</span>\n      <p className='subtitle'>Afin de stocker vos données de manière sécurisée,\n        merci d'autoriser Masq à utiliser le stockage persistant de votre navigateur.\n        Cette notification réapparaitra à la prochaine ouverture de Masq si nécessaire.\n      </p>\n      <Button label='OK' onClick={onClose} />\n    </div>\n  </Modal>\n)\n\nPermanentStorageRequest.propTypes = {\n  onClose: PropTypes.func.isRequired\n}\n\nexport default PermanentStorageRequest\n","export { default as Signup } from './Signup/Signup'\nexport { default as AuthApp } from './AuthApp/AuthApp'\nexport { default as QRCodeModal } from './QRCodeModal/QRCodeModal'\nexport { default as SyncDevice } from './SyncDevice/SyncDevice'\nexport { default as AddProfile } from './AddProfile/AddProfile'\nexport { default as PersistentStorageRequest } from './PersistentStorageRequest/PersistentStorageRequest'\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"SyncDevice\":\"SyncDevice_SyncDevice__gCKHS\",\"title\":\"SyncDevice_title__2KuYj\",\"description\":\"SyncDevice_description__16vj6\",\"loader\":\"SyncDevice_loader__r8Vfm\"};","const isName = str => /^$|^[A-zÀ-ú\\- ]+$/.test(str)\n\nconst isUsername = str => /^[\\w!?$#@()\\-*]+$/.test(str)\n\nconst isPassword = str => /^(?=.*\\d)(?=.*[!?$#@()\\-*]).{8,}$/.test(str)\n\nexport { isName, isUsername, isPassword }\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"AuthApp\":\"AuthApp_AuthApp__2znKd\",\"title\":\"AuthApp_title__3fm6b\",\"appTitle\":\"AuthApp_appTitle__1hdWP\",\"description\":\"AuthApp_description__iwDDs\",\"buttons\":\"AuthApp_buttons__2kMVu\"};","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from \"react\";\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  fill: \"#FFF\",\n  fillRule: \"nonzero\"\n}, React.createElement(\"g\", {\n  fillOpacity: 0.5\n}, React.createElement(\"path\", {\n  d: \"M78.899 29.426l-.056-.487c0-.046-.045-.08-.09-.08h-.023c-.01 0-.01.012-.022.012a1.103 1.103 0 0 1-.393.068c-.158 0-.27-.046-.338-.125-.067-.09-.1-.227-.1-.43v-1.066h.808a.077.077 0 0 0 .079-.08v-.476c0-.045-.045-.08-.09-.08h-.809V25.993c0-.046-.045-.08-.09-.08h-.607c-.045 0-.078.034-.09.08v.69h-.472a.089.089 0 0 0-.09.092v.476c0 .045.034.079.068.09h.483v1.202c0 .374.09.657.259.839.168.181.438.272.786.272.146 0 .292-.012.427-.046.101-.022.203-.056.27-.09.067-.023.09-.046.09-.091 0 .011 0 .011 0 0zM65.155 28.769c-.01-.023-.022-.046-.033-.068-.012-.057.033-.114.067-.16.034-.045.056-.101.09-.158.056-.102.101-.215.135-.329.078-.238.1-.487.1-.736a2.605 2.605 0 0 0-.145-.782 1.98 1.98 0 0 0-.382-.624 2.048 2.048 0 0 0-.506-.43 1.98 1.98 0 0 0-.663-.261c-.247-.057-.506-.068-.753-.057-.258.023-.506.08-.742.193-.236.102-.449.249-.629.43a2.44 2.44 0 0 0-.45.624c-.112.238-.18.487-.202.748-.022.26-.01.521.045.77.057.25.158.488.293.704.134.215.303.396.494.544.191.147.416.26.64.34.124.045.259.068.394.09.123.023.247.034.37.023.124 0 .237-.011.36-.034.068-.011.135-.023.191-.034.056-.011.113-.023.135-.08.023-.045-.011-.09-.034-.135-.022-.057-.056-.102-.078-.16-.045-.101-.101-.192-.146-.294a.115.115 0 0 0-.068-.056c-.022-.012-.056 0-.078 0-.034.01-.068.01-.102.01-.134.024-.27.024-.404 0a1.466 1.466 0 0 1-.697-.294 1.557 1.557 0 0 1-.46-.59 1.563 1.563 0 0 1-.113-.747c.034-.25.124-.5.27-.703a1.5 1.5 0 0 1 .562-.465 1.441 1.441 0 0 1 1.404.09c.18.114.326.273.45.454a1.528 1.528 0 0 1 .112 1.383 1.57 1.57 0 0 1-.37.521c-.023.023-.046.035-.057.069a.098.098 0 0 0 0 .079l.416.839c.022.045.045.102.09.136.034.022.067.011.101.011h.64c.08 0 .135-.08.09-.159-.044-.079-.078-.158-.123-.226l-.214-.476zM68.931 28.644l.506-1.916a.085.085 0 0 1 .079-.056h.618c.045 0 .09.034.09.09v.023l-.9 2.709c-.01.034-.044.045-.078.045h-.585a.085.085 0 0 1-.078-.056l-.63-1.848-.606 1.848a.094.094 0 0 1-.079.045h-.573a.085.085 0 0 1-.079-.057l-.899-2.731c0-.046.034-.091.09-.091h.64c.034 0 .057.023.068.045l.506 1.927.584-1.915a.085.085 0 0 1 .079-.057h.528c.034 0 .067.023.079.045l.64 1.95zM72.471 27.034a.93.93 0 0 0-.382-.34 1.17 1.17 0 0 0-.528-.124c-.259 0-.495.068-.708.215-.214.136-.371.329-.483.555a1.724 1.724 0 0 0-.169.771v.057c.011.272.067.521.169.737.112.226.27.408.472.532.202.125.427.182.674.182.18 0 .337-.023.472-.08 0 0 .303-.102.472-.374l.011.295c.011.045.045.08.09.08h.573c.045 0 .09-.035.09-.091V26.75a.089.089 0 0 0-.09-.09h-.573a.098.098 0 0 0-.09.067v.306zm-.169.499c.135.147.191.34.191.578 0 .25-.067.442-.213.6a.694.694 0 0 1-.54.228.7.7 0 0 1-.539-.227.844.844 0 0 1-.213-.533s-.045-.374.213-.657c.135-.159.326-.227.55-.227-.01-.023.327-.045.551.238zM74.483 26.74c-.012-.046-.045-.08-.09-.08h-.585a.089.089 0 0 0-.09.09v2.699c0 .045.034.09.09.09h.607a.085.085 0 0 0 .079-.056v-1.485c0-.227.056-.408.157-.533a.535.535 0 0 1 .438-.193c.337 0 .506.227.506.67v1.54a.085.085 0 0 0 .079.057h.607c.044 0 .09-.034.09-.09v-1.655c0-.397-.09-.703-.27-.907-.18-.204-.439-.317-.776-.317-.202 0-.37.034-.517.113a.973.973 0 0 0-.348.329l.023-.272z\"\n})), React.createElement(\"path\", {\n  d: \"M21.497 8.887C20.587 7.833 19.25 7.3 17.52 7.3c-1.011 0-1.944.238-2.787.725-.854.476-1.472 1.122-1.876 1.905-.854-1.757-2.349-2.63-4.462-2.63-1.01 0-1.899.193-2.652.578a4.317 4.317 0 0 0-1.786 1.7l-.023-1.235a.574.574 0 0 0-.55-.578H.663a.578.578 0 0 0-.573.578v13.534c0 .317.258.578.573.578h2.82c.315 0 .574-.26.574-.578v-7.368c0-1.134.258-2.029.753-2.686.505-.658 1.202-.987 2.101-.987.9 0 1.55.284 1.955.84.405.555.618 1.427.618 2.595v7.594c0 .318.259.579.574.579h2.831c.315 0 .562-.25.574-.556v-7.356c0-1.157.247-2.063.753-2.71.505-.657 1.202-.986 2.078-.986.877 0 1.529.284 1.945.84.415.555.629 1.427.629 2.595v7.628c.022.307.27.545.573.545h2.832c.314 0 .573-.261.573-.579v-8.342c.022-2.03-.438-3.582-1.349-4.636zM39.938 7.753H37.23a.566.566 0 0 0-.55.578l-.046 1.327a4.816 4.816 0 0 0-1.932-1.746c-.81-.42-1.72-.624-2.709-.624-1.337 0-2.54.363-3.607 1.077a7.22 7.22 0 0 0-2.472 2.857c-.585 1.19-.877 2.493-.877 3.91 0 1.542.292 2.902.888 4.081.596 1.179 1.393 2.097 2.416 2.732 1.023.635 2.169.952 3.45.952 1.09 0 2.045-.193 2.866-.59a4.769 4.769 0 0 0 1.977-1.745l.045 1.292c0 .317.259.578.573.578h2.675c.315 0 .573-.26.573-.578V8.331a.583.583 0 0 0-.562-.578zm-4.281 10.395c-.73.793-1.652 1.19-2.776 1.19-1.124 0-2.056-.397-2.776-1.19-.73-.794-1.09-1.814-1.09-3.061 0-1.235.36-2.244 1.068-3.038.72-.793 1.64-1.179 2.787-1.179 1.146 0 2.079.397 2.787 1.18.719.793 1.067 1.802 1.067 3.037.023 1.258-.337 2.278-1.067 3.06zM48.153 22.92a12.28 12.28 0 0 1-3.147-.386c-.797-.204-1.45-.476-1.955-.782a.633.633 0 0 1-.28-.623l.291-1.95a.63.63 0 0 1 .91-.465c.461.238.956.442 1.506.612a8.379 8.379 0 0 0 2.506.408c1.619 0 2.439-.419 2.439-1.246 0-.442-.169-.783-.517-1.01-.348-.226-1.056-.498-2.146-.804-1.72-.476-2.945-1.088-3.675-1.836-.73-.737-1.101-1.735-1.101-2.993 0-1.405.528-2.516 1.573-3.321 1.045-.805 2.495-1.213 4.326-1.213.9 0 1.798.102 2.686.318.697.17 1.304.374 1.798.612a.617.617 0 0 1 .337.657l-.27 1.87a.623.623 0 0 1-.865.488 8.393 8.393 0 0 0-1.303-.442 8.726 8.726 0 0 0-2.214-.306c-1.394 0-2.09.374-2.09 1.122 0 .42.168.76.505.997.338.238 1 .51 1.99.794 1.831.544 3.124 1.179 3.876 1.904.753.737 1.135 1.746 1.135 3.027 0 1.428-.561 2.539-1.674 3.355-1.135.805-2.675 1.213-4.641 1.213zM56.289 27.828a.826.826 0 0 1 .652-.318c.157 0 .292.034.438.114.18.102.326.25.404.43.068.16.113.318.113.5 0 .34-.113.6-.326.804a.895.895 0 0 1-.64.25.775.775 0 0 1-.641-.318v.102a.328.328 0 0 1-.023.136c-.022.023-.056.023-.134.023h-.236c-.068 0-.113-.012-.124-.023-.022-.023-.022-.057-.022-.136v-3.095c0-.068.01-.113.022-.136.022-.022.056-.022.124-.022h.236a.32.32 0 0 1 .134.022c.023.023.023.057.023.136v1.53zm.483.181a.533.533 0 0 0-.382.159.516.516 0 0 0-.157.385.542.542 0 0 0 .54.544c.145 0 .28-.056.381-.158a.524.524 0 0 0 .158-.397.562.562 0 0 0-.158-.386.506.506 0 0 0-.382-.147zM58.862 29.245l-.809-1.474a.562.562 0 0 1-.045-.102c0-.034.011-.057.034-.068a.298.298 0 0 1 .124-.023h.292c.056 0 .1 0 .112.012a.423.423 0 0 1 .068.09l.528 1.02.505-1.008c.023-.057.045-.091.057-.091.01-.011.056-.011.112-.011h.28c.057 0 .09 0 .113.011.034.011.045.045.045.08 0 .022-.011.056-.045.101l-1.416 2.732c-.022.057-.045.08-.067.09-.011.012-.056.012-.112.012h-.281c-.057 0-.09 0-.113-.011-.033-.012-.045-.046-.045-.08 0-.022.012-.056.045-.102l.618-1.178z\"\n}), React.createElement(\"path\", {\n  fillOpacity: 0.5,\n  d: \"M76.944 18.533c-.057-.113-.135-.227-.158-.351-.056-.295.191-.556.337-.794a11.732 11.732 0 0 0 1.135-2.494 11.92 11.92 0 0 0 .517-3.774c-.033-1.372-.28-2.743-.775-4.013A11.333 11.333 0 0 0 76.067 3.9a10.682 10.682 0 0 0-2.618-2.21 11.403 11.403 0 0 0-3.383-1.36A13.01 13.01 0 0 0 66.2.068c-1.314.102-2.618.42-3.82.963a11.504 11.504 0 0 0-3.237 2.21 11.196 11.196 0 0 0-2.292 3.209 11.64 11.64 0 0 0-1.057 3.831 12.794 12.794 0 0 0 .236 3.979c.281 1.27.787 2.493 1.484 3.593a10.734 10.734 0 0 0 2.55 2.788c.99.76 2.113 1.338 3.293 1.723.652.216 1.315.363 1.99.465.629.09 1.292.147 1.932.125a17.049 17.049 0 0 0 1.854-.16c.338-.056.675-.112 1-.203.282-.068.585-.125.697-.43.09-.25-.033-.454-.146-.67l-.404-.816-.742-1.496a.559.559 0 0 0-.326-.295c-.146-.045-.27-.011-.416.023a6.394 6.394 0 0 1-.494.09 7.722 7.722 0 0 1-2.045.012 7.49 7.49 0 0 1-3.551-1.485 7.525 7.525 0 0 1-2.338-3.026 7.554 7.554 0 0 1-.55-3.854 7.473 7.473 0 0 1 1.393-3.57 7.441 7.441 0 0 1 2.854-2.37 7.41 7.41 0 0 1 3.855-.691 7.407 7.407 0 0 1 3.36 1.156 7.647 7.647 0 0 1 2.281 2.3 7.725 7.725 0 0 1 1.169 3.64 7.514 7.514 0 0 1-.596 3.4 7.55 7.55 0 0 1-1.921 2.675c-.113.102-.236.193-.281.351a.54.54 0 0 0 .022.397l2.146 4.274c.113.215.214.544.439.68.157.09.36.068.528.068h3.281c.394-.012.674-.431.483-.794-.202-.397-.415-.793-.618-1.179l-1.27-2.448z\"\n}));\n\nvar SvgLogo = function SvgLogo(props) {\n  return React.createElement(\"svg\", _extends({\n    width: 79,\n    height: 31,\n    viewBox: \"0 0 79 31\"\n  }, props), _ref);\n};\n\nexport default __webpack_public_path__ + \"static/media/logo.c061ba54.svg\";\nexport { SvgLogo as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from \"react\";\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M10.2 41.8c2 3.5 4.2 6.9 6.6 10.1H0v-3.5c3.3-2.3 6.7-4.5 10.2-6.6zM206.1 40.5c-4.6 3.4-8.8 7.2-12.6 11.4h-22.3c5.1-6.9 9.3-14.5 12.5-22.6 7.7 3.3 15.2 7 22.4 11.2z\",\n  fill: \"#3394D2\"\n});\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M183.7 29.3c-3.2 8.1-7.4 15.7-12.5 22.6H16.7c-2.4-3.2-4.6-6.6-6.6-10.1C36.5 26 66.8 16.3 99.4 14.6a163.613 163.613 0 0 1 19.8 0c22.7 1.2 44.5 6.3 64.5 14.7z\",\n  fill: \"#4ebbc2\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M206.1 40.5c13-9.6 28.8-15.6 45.9-16.4v27.8h-28.6c-.3-.3-.7-.5-1-.8-.3-.2-.6-.5-.9-.7-.1 0-.1-.1-.2-.1-.3-.2-.6-.5-1-.7l-.9-.6c-.1-.1-.2-.2-.3-.2-.2-.2-.5-.3-.7-.5l-.9-.6c-.2-.1-.4-.3-.6-.4-.2-.2-.5-.3-.7-.5l-.9-.6-.9-.6s-.1-.1-.2-.1c-.4-.2-.7-.5-1.1-.7-.4-.2-.8-.5-1.1-.7s-.8-.5-1.2-.7c-.3-.2-.5-.3-.8-.5-1.4-.9-2.6-1.6-3.9-2.4z\",\n  fill: \"#e53b5b\"\n});\n\nvar _ref4 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M223.4 51.9h-29.9c3.8-4.2 8-8 12.6-11.4 1.3.8 2.6 1.5 3.8 2.3.3.2.5.3.8.5.4.2.8.5 1.2.7s.8.5 1.1.7c.4.2.7.5 1.1.7.1 0 .1.1.2.1l.9.6.9.6c.3.2.5.3.7.5.2.1.4.3.6.4l.9.6c.2.2.5.3.7.5.1.1.2.2.3.2l.9.6c.3.2.7.5 1 .7.1 0 .1.1.2.1.3.2.6.5.9.7.4.4.7.6 1.1.9z\",\n  fill: \"#6f559f\"\n});\n\nvar SvgBackground = function SvgBackground(props) {\n  return React.createElement(\"svg\", _extends({\n    id: \"Calque_1\",\n    preserveAspectRatio: \"none\",\n    viewBox: \"0 0 252 52\"\n  }, props), _ref, _ref2, _ref3, _ref4);\n};\n\nexport default __webpack_public_path__ + \"static/media/background.0b1d9619.svg\";\nexport { SvgBackground as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from \"react\";\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"defs\", null, React.createElement(\"rect\", {\n  id: \"a\",\n  width: 120,\n  height: 120,\n  rx: 10\n}), React.createElement(\"path\", {\n  id: \"b\",\n  d: \"M78.667 60c0 1.4-.934 2.333-2.334 2.333h-14v14c0 1.4-.933 2.334-2.333 2.334-1.4 0-2.333-.934-2.333-2.334v-14h-14c-1.4 0-2.334-.933-2.334-2.333 0-1.4.934-2.333 2.334-2.333h14v-14c0-1.4.933-2.334 2.333-2.334 1.4 0 2.333.934 2.333 2.334v14h14c1.4 0 2.334.933 2.334 2.333z\"\n}));\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  fill: \"none\",\n  fillRule: \"evenodd\"\n}, React.createElement(\"g\", {\n  opacity: 0.5\n}, React.createElement(\"use\", {\n  fill: \"#1F2330\",\n  xlinkHref: \"#a\"\n}), React.createElement(\"rect\", {\n  width: 118,\n  height: 118,\n  x: 1,\n  y: 1,\n  stroke: \"#FFF\",\n  strokeWidth: 2,\n  rx: 10\n})), React.createElement(\"use\", {\n  fill: \"#FFF\",\n  fillRule: \"nonzero\",\n  opacity: 0.5,\n  xlinkHref: \"#b\"\n}));\n\nvar SvgPlusSquare = function SvgPlusSquare(props) {\n  return React.createElement(\"svg\", _extends({\n    width: 120,\n    height: 120,\n    viewBox: \"0 0 120 120\"\n  }, props), _ref, _ref2);\n};\n\nexport default __webpack_public_path__ + \"static/media/plus-square.e518f822.svg\";\nexport { SvgPlusSquare as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from \"react\";\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"polyline\", {\n  points: \"6 9 12 15 18 9\"\n});\n\nvar SvgChevron = function SvgChevron(props) {\n  return React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    stroke: \"currentColor\",\n    strokeWidth: 2,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    className: \"feather feather-chevron-down\"\n  }, props), _ref);\n};\n\nexport default __webpack_public_path__ + \"static/media/chevron.c66b213d.svg\";\nexport { SvgChevron as ReactComponent };","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { signin, signup, fetchUsers } from '../../actions'\nimport { Button, TextField } from 'qwant-research-components'\nimport PropTypes from 'prop-types'\n\nimport styles from './Login.module.scss'\nimport { ReactComponent as Logo } from '../../assets/logo.svg'\nimport { ReactComponent as Background } from '../../assets/background.svg'\nimport { ReactComponent as PlusSquare } from '../../assets/plus-square.svg'\nimport { ReactComponent as Chevron } from '../../assets/chevron.svg'\nimport { Avatar } from '../../components'\n\nimport { Signup, AddProfile, SyncDevice, QRCodeModal } from '../../modals'\n\nclass Login extends Component {\n  constructor (props) {\n    super(props)\n    this.state = {\n      selectedUser: null,\n      isWrongPassword: false,\n      isModalOpened: false,\n      isLoggedIn: false,\n      signup: false,\n      sync: false,\n      password: '',\n      qrcodeModal: false\n    }\n\n    this.handleClickSyncProfile = this.handleClickSyncProfile.bind(this)\n    this.handleClickNewProfile = this.handleClickNewProfile.bind(this)\n    this.handleClickNewUser = this.handleClickNewUser.bind(this)\n    this.onPasswordChange = this.onPasswordChange.bind(this)\n    this.closeQRCodeModal = this.closeQRCodeModal.bind(this)\n    this.openQRCodeModal = this.openQRCodeModal.bind(this)\n    this.onPasswordKeyUp = this.onPasswordKeyUp.bind(this)\n    this.handleSignup = this.handleSignup.bind(this)\n    this.handleClose = this.handleClose.bind(this)\n    this.connect = this.connect.bind(this)\n    this.goBack = this.goBack.bind(this)\n  }\n\n  componentDidMount () {\n    this.props.fetchUsers()\n  }\n\n  handleClickNewUser () {\n    this.setState({\n      isModalOpened: !this.state.isModalOpened\n    })\n  }\n\n  handleClose () {\n    this.setState({\n      isModalOpened: false,\n      signup: false,\n      sync: false\n    })\n  }\n\n  handleSignup (user) {\n    const { signup } = this.props\n    signup(user)\n    this.setState({ isModalOpened: false, signup: false })\n  }\n\n  handleClickNewProfile () {\n    this.setState({ isModalOpened: false, signup: true })\n  }\n\n  handleClickSyncProfile () {\n    this.setState({ isModalOpened: false, sync: true })\n  }\n\n  selectUser (user) {\n    this.setState({ selectedUser: user })\n  }\n\n  onPasswordChange (e) {\n    this.setState({\n      password: e.target.value\n    })\n  }\n\n  async onPasswordKeyUp (e) {\n    if (e.key === 'Enter') {\n      this.connect()\n    }\n  }\n\n  async connect () {\n    const { signin } = this.props\n    const { password, selectedUser } = this.state\n    try {\n      await signin(selectedUser, password)\n    } catch (e) {\n      this.setState({ isWrongPassword: true })\n    }\n  }\n\n  goBack () {\n    this.setState({ selectedUser: null })\n  }\n\n  openQRCodeModal () {\n    this.setState({ qrcodeModal: true })\n  }\n\n  closeQRCodeModal () {\n    this.setState({ qrcodeModal: false })\n  }\n\n  renderUsersSelection () {\n    const { users, currentAppRequest } = this.props\n    const { isModalOpened, signup, sync, qrcodeModal } = this.state\n\n    return (\n      <div style={{ width: '100%' }}>\n        {qrcodeModal && <QRCodeModal onClose={this.closeQRCodeModal} />}\n\n        <Logo className={styles.Logo} />\n        <h1 className={styles.title}>Qui est-ce ?</h1>\n        {currentAppRequest && (\n          <div style={{ marginBottom: 32 }}>\n            <Button label='Se connecter avec un autre appareil' onClick={this.openQRCodeModal} />\n          </div>\n        )}\n        <div className={styles.users}>\n          {users.map(user => (\n            <div key={user.username} className={styles.user} onClick={() => this.selectUser(user)}>\n              <Avatar {...user} />\n              <h2>{user.username}</h2>\n            </div>\n          ))}\n          <PlusSquare className={styles.PlusSquare} onClick={this.handleClickNewUser} />\n        </div>\n        {signup && <Signup onSignup={this.handleSignup} onClose={this.handleClose} />}\n        {sync && <SyncDevice onClose={this.handleClose} />}\n        {isModalOpened && (\n          <AddProfile\n            onClose={this.handleClose}\n            onNewProfile={this.handleClickNewProfile}\n            onSyncProfile={this.handleClickSyncProfile}\n          />\n        )}\n      </div>\n    )\n  }\n\n  renderPassword () {\n    const { selectedUser } = this.state\n\n    return (\n      <div style={{ width: '100%' }}>\n        <Logo className={styles.Logo} />\n\n        <div className={styles.goback} onClick={this.goBack}>\n          <Chevron style={{ transform: 'rotate(90deg)', cursor: 'pointer' }} />\n          <p style={{ cursor: 'pointer' }}>Changer d'utilisateur</p>\n        </div>\n\n        <div className={styles.users}>\n          <div key={selectedUser.username} className={styles.user}>\n            <Avatar {...selectedUser} />\n            <h2>{selectedUser.username}</h2>\n          </div>\n        </div>\n\n        <div className={styles.passwordSection}>\n          <p>Entrez votre mot de passe</p>\n          <TextField\n            autoFocus\n            type='password'\n            onChange={this.onPasswordChange}\n            error={this.state.isWrongPassword}\n            label={this.state.isWrongPassword ? 'Mauvais mot de passe, veuillez réessayer' : ''}\n            onKeyUp={this.onPasswordKeyUp}\n          />\n          <div style={{ marginBottom: 32 }} />\n          <Button label='connexion' onClick={this.connect} />\n        </div>\n      </div>\n    )\n  }\n\n  componentDidUpdate () {\n    if (this.props.user) {\n      this.props.history.push('/apps')\n    }\n  }\n\n  render () {\n    const { selectedUser } = this.state\n\n    return (\n      <div className={styles.Login}>\n        {selectedUser\n          ? this.renderPassword()\n          : this.renderUsersSelection()\n        }\n\n        <Background className={styles.Background} />\n      </div>\n    )\n  }\n}\n\nLogin.propTypes = {\n  users: PropTypes.arrayOf(PropTypes.object),\n  user: PropTypes.object,\n  fetchUsers: PropTypes.func,\n  signup: PropTypes.func,\n  signin: PropTypes.func,\n  history: PropTypes.object,\n  currentAppRequest: PropTypes.object\n}\n\nconst mapStateToProps = state => ({\n  user: state.masq.currentUser,\n  users: state.masq.users,\n  currentAppRequest: state.masq.currentAppRequest\n})\n\nconst mapDispatchToProps = dispatch => ({\n  signin: (user, passphrase) => dispatch(signin(user, passphrase)),\n  signup: user => dispatch(signup(user)),\n  fetchUsers: user => dispatch(fetchUsers(user))\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Login)\n","import React, { PureComponent } from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { Redirect } from 'react-router-dom'\nimport { Card } from 'qwant-research-components'\n\nimport { fetchApps } from '../../actions'\n\nimport styles from './Apps.module.scss'\n\n// const Actions = () => (\n//   <div style={{ display: 'flex', alignItems: 'center' }}>\n//     {/* <Switch color='#a3005c' label='Enabled' checked /> */}\n//     <div style={{ marginRight: 16 }} />\n//     <BurgerMenu>\n//       <Icon name='Trash' fill='#b2b2b2' />\n//     </BurgerMenu>\n//   </div>\n// )\n\nclass Apps extends PureComponent {\n  componentDidMount () {\n    if (!this.props.user) return\n    this.props.fetchApps()\n  }\n\n  render () {\n    const { apps, user } = this.props\n\n    if (!user) return <Redirect to='/' />\n    if (!apps) return false\n\n    return (\n      <div className={styles.Apps}>\n        <p className='title'>Mes Applications</p>\n        <p className='subtitle'>Retrouvez vos applications synchronisées avec Masq</p>\n        {apps.map((app, index) => (\n          <div key={index} className={styles.Card}>\n            <Card minHeight={64} title={app.name} image={app.imageURL} color='#a3005c' description={app.description} />\n          </div>\n        ))}\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = state => ({\n  user: state.masq.currentUser,\n  apps: state.masq.apps\n})\n\nconst mapDispatchToProps = dispatch => ({\n  fetchApps: () => dispatch(fetchApps())\n})\n\nApps.propTypes = {\n  apps: PropTypes.array,\n  user: PropTypes.object,\n  fetchApps: PropTypes.func\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Apps)\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from \"react\";\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"m37.2 0h-6.3c-.54 0-.9.36-.9.9v6.3c0 .54.36.9.9.9h6.3c.54 0 .9-.36.9-.9v-6.3c0-.54-.36-.9-.9-.9zm-.9 6.3h-4.5v-4.5h4.5zm10.8-6.3h-6.3c-.54 0-.9.36-.9.9v6.3c0 .54.36.9.9.9h6.3c.54 0 .9-.36.9-.9v-6.3c0-.54-.36-.9-.9-.9zm-.9 6.3h-4.5v-4.5h4.5zm.9 3.6h-6.3c-.54 0-.9.36-.9.9v6.3c0 .54.36.9.9.9h6.3c.54 0 .9-.36.9-.9v-6.3c0-.54-.36-.9-.9-.9zm-.9 6.3h-4.5v-4.5h4.5zm-9-6.3h-6.3c-.54 0-.9.36-.9.9v6.3c0 .54.36.9.9.9h6.3c.54 0 .9-.36.9-.9v-6.3c0-.54-.36-.9-.9-.9zm-.9 6.3h-4.5v-4.5h4.5z\",\n  transform: \"translate(-30)\"\n});\n\nvar SvgCards = function SvgCards(props) {\n  return React.createElement(\"svg\", _extends({\n    height: 18,\n    viewBox: \"0 0 18 18\",\n    width: 18\n  }, props), _ref);\n};\n\nexport default __webpack_public_path__ + \"static/media/cards.ff3aa3d8.svg\";\nexport { SvgCards as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from \"react\";\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"m13 0h-10c-1.7 0-3 1.3-3 3v16c0 1.7 1.3 3 3 3h10c1.7 0 3-1.3 3-3v-16c0-1.7-1.3-3-3-3zm1 19c0 .6-.4 1-1 1h-10c-.6 0-1-.4-1-1v-16c0-.6.4-1 1-1h10c.6 0 1 .4 1 1zm-6-1c1.1045695 0 2-.8954305 2-2s-.8954305-2-2-2-2 .8954305-2 2 .8954305 2 2 2z\",\n  transform: \"\"\n});\n\nvar SvgPhone = function SvgPhone(props) {\n  return React.createElement(\"svg\", _extends({\n    height: 22,\n    viewBox: \"0 0 16 22\",\n    width: 16\n  }, props), _ref);\n};\n\nexport default __webpack_public_path__ + \"static/media/phone.e486939a.svg\";\nexport { SvgPhone as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from \"react\";\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"m12 8c-2.2 0-4 1.8-4 4s1.8 4 4 4 4-1.8 4-4-1.8-4-4-4zm0 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm8.3 1.4c.1-.2.3-.4.7-.4 1.7 0 3-1.3 3-3s-1.3-3-3-3h-.2c-.2 0-.4-.1-.5-.3 0-.1 0-.1-.1-.2-.1-.2-.1-.5.2-.8 1.2-1.2 1.2-3.1 0-4.2-.6-.6-1.3-.9-2.1-.9s-1.6.3-2.2.9c-.2.2-.5.2-.7.1-.2 0-.4-.3-.4-.6 0-1.7-1.3-3-3-3s-3 1.3-3 3v.2c0 .2-.1.4-.3.5-.1 0-.1 0-.2.1-.2.1-.5 0-.8-.2-1.2-1.2-3.1-1.2-4.2 0-1.2 1.2-1.2 3.1.1 4.3.2.2.2.5.1.8-.1.2-.4.4-.7.4-1.7 0-3 1.3-3 3s1.3 3 3 3h.2c.3 0 .5.2.6.4s.1.5-.2.8c-.6.6-.9 1.3-.9 2.1s.3 1.5.9 2.1c1.2 1.2 3.1 1.2 4.3-.1.2-.2.5-.2.8-.1s.4.3.4.7c0 1.7 1.3 3 3 3s3-1.3 3-3v-.2c0-.3.2-.5.4-.6s.5-.1.8.2c1.2 1.2 3.1 1.2 4.2 0 1.2-1.2 1.2-3.1-.1-4.3-.1-.2-.2-.5-.1-.7zm-1.8-.8c-.4 1-.2 2.1.6 3 .2.2.3.4.3.7s-.1.5-.3.7-.4.3-.7.3c-.3 0-.5-.1-.8-.4-.8-.8-1.9-1-2.9-.5-1 .4-1.6 1.4-1.6 2.4v.2c0 .6-.4 1-1 1s-1-.4-1-1v-.1c0-1.1-.7-2-1.7-2.4-.3-.2-.7-.2-1.1-.2-.7 0-1.4.3-1.9.8-.4.4-1 .4-1.4 0-.2-.2-.3-.4-.3-.7s.1-.5.4-.8c.8-.8 1-1.9.5-2.9-.4-1-1.4-1.6-2.4-1.6h-.2c-.6 0-1-.4-1-1s.4-1 1-1h.1c1.1 0 2-.7 2.4-1.7s.2-2.1-.6-3c-.4-.4-.4-1 0-1.4s1-.4 1.5.1c.7.7 1.8.9 2.7.6.1 0 .2 0 .3-.1 1-.4 1.6-1.4 1.6-2.4v-.2c0-.6.4-1 1-1s1 .4 1 1.1c0 1.1.6 2 1.6 2.4s2.1.2 3-.6c.2-.2.4-.3.7-.3s.5.1.7.3c.4.4.4 1-.1 1.5-.7.7-.9 1.8-.6 2.7 0 .1 0 .2.1.3.4 1 1.4 1.6 2.4 1.6h.2c.6 0 1 .4 1 1s-.4 1-1.1 1c-1 0-2 .6-2.4 1.6z\",\n  transform: \"\"\n});\n\nvar SvgSettings = function SvgSettings(props) {\n  return React.createElement(\"svg\", _extends({\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    width: 24\n  }, props), _ref);\n};\n\nexport default __webpack_public_path__ + \"static/media/settings.14755d32.svg\";\nexport { SvgSettings as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from \"react\";\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"m9.01126408 21c0 .6-.40050063 1-1.00125156 1h-5.00625783c-1.70212766 0-3.00375469-1.3-3.00375469-3v-16c0-1.7 1.30162703-3 3.00375469-3h5.00625783c.60075093 0 1.00125156.4 1.00125156 1s-.40050063 1-1.00125156 1h-5.00625783c-.60075094 0-1.00125156.4-1.00125156 1v16c0 .6.40050062 1 1.00125156 1h5.00625783c.60075093 0 1.00125156.4 1.00125156 1zm10.91364202-9.6c.1001252-.2.1001252-.5 0-.8-.1001251-.1-.1001251-.2-.2002503-.3l-4.0050062-4c-.4005007-.4-1.0012516-.4-1.4017522 0-.4005007.4-.4005007 1 0 1.4l2.3028786 2.3h-9.61201505c-.60075094 0-1.00125156.4-1.00125156 1s.40050062 1 1.00125156 1h9.61201505l-2.3028786 2.3c-.4005007.4-.4005007 1 0 1.4.2002503.2.5006258.3.7008761.3s.5006257-.1.7008761-.3l4.0050062-4c.1001252-.1.2002503-.2.2002503-.3z\"\n});\n\nvar SvgLogout = function SvgLogout(props) {\n  return React.createElement(\"svg\", _extends({\n    height: 22,\n    viewBox: \"0 0 20 22\",\n    width: 20\n  }, props), _ref);\n};\n\nexport default __webpack_public_path__ + \"static/media/logout.d4c1276a.svg\";\nexport { SvgLogout as ReactComponent };","import React from 'react'\nimport { Avatar } from '../../components'\nimport { connect } from 'react-redux'\nimport { Redirect, NavLink } from 'react-router-dom'\nimport PropTypes from 'prop-types'\n\nimport { signout } from '../../actions'\n\nimport styles from './SidebarMin.module.scss'\nimport { ReactComponent as AppsIcon } from '../../assets/cards.svg'\nimport { ReactComponent as PhoneIcon } from '../../assets/phone.svg'\nimport { ReactComponent as SettingsIcon } from '../../assets/settings.svg'\nimport { ReactComponent as LogoutIcon } from '../../assets/logout.svg'\n\nclass SidebarMin extends React.Component {\n  render () {\n    const { user, signout } = this.props\n\n    if (!user) return <Redirect to='/' />\n\n    return (\n      <div className={styles.Sidebar}>\n        <div>\n          <div className={styles.header}>\n            <Avatar {...user} size={64} />\n            <h2>{user.username}</h2>\n          </div>\n\n          <div className={styles.nav}>\n            <NavLink to='/apps' className={styles.navElement} activeClassName={styles.active}>\n              <AppsIcon fill='white' opacity={0.8} width={24} />\n              <p className='label' />\n            </NavLink>\n            <NavLink to='/devices' className={styles.navElement} activeClassName={styles.active}>\n              <PhoneIcon fill='white' opacity={0.8} width={24} />\n              <p className='label' />\n            </NavLink>\n            <NavLink to='/settings' className={styles.navElement} activeClassName={styles.active}>\n              <SettingsIcon fill='white' opacity={0.8} width={24} />\n              <p className='label' />\n            </NavLink>\n          </div>\n        </div>\n\n        <div className={styles.logout} onClick={signout}>\n          <div className={styles.navElement}>\n            <LogoutIcon fill='white' opacity={0.8} width={24} />\n            <p className='label' />\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nSidebarMin.propTypes = {\n  user: PropTypes.object,\n  signout: PropTypes.func\n}\n\nconst mapStateToProps = (state) => ({\n  user: state.masq.currentUser\n})\n\nconst mapDispatchToProps = dispatch => ({\n  signout: () => dispatch(signout())\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SidebarMin)\n","import React from 'react'\nimport { Avatar } from '../../components'\nimport { connect } from 'react-redux'\nimport { Redirect, NavLink } from 'react-router-dom'\nimport PropTypes from 'prop-types'\n\nimport { signout } from '../../actions'\n\nimport styles from './SidebarMax.module.scss'\nimport { ReactComponent as AppsIcon } from '../../assets/cards.svg'\nimport { ReactComponent as PhoneIcon } from '../../assets/phone.svg'\nimport { ReactComponent as SettingsIcon } from '../../assets/settings.svg'\nimport { ReactComponent as LogoutIcon } from '../../assets/logout.svg'\n\nclass SidebarMax extends React.Component {\n  render () {\n    const { user, signout } = this.props\n\n    if (!user) return <Redirect to='/' />\n\n    return (\n      <div className={styles.Sidebar}>\n        <div className={styles.header}>\n          <Avatar {...user} size={64} />\n          <h2>{user.username}</h2>\n        </div>\n        <div className={styles.nav}>\n          <NavLink to='/apps' className={styles.navElement} activeClassName={styles.active}>\n            <AppsIcon fill='white' opacity={0.8} width={24} />\n            <p className='label'>Applications</p>\n          </NavLink>\n          <NavLink to='/devices' className={styles.navElement} activeClassName={styles.active}>\n            <PhoneIcon fill='white' opacity={0.8} width={24} />\n            <p className='label'>Appareils</p>\n          </NavLink>\n          <NavLink to='/settings' className={styles.navElement} activeClassName={styles.active}>\n            <SettingsIcon fill='white' opacity={0.8} width={24} />\n            <p className='label'>Paramètres</p>\n          </NavLink>\n        </div>\n        <div className={styles.logout} onClick={signout}>\n          <div className={styles.navElement}>\n            <LogoutIcon fill='white' opacity={0.8} width={24} />\n            <p className='label'>Déconnexion</p>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nSidebarMax.propTypes = {\n  user: PropTypes.object,\n  signout: PropTypes.func\n}\n\nconst mapStateToProps = (state) => ({\n  user: state.masq.currentUser\n})\n\nconst mapDispatchToProps = dispatch => ({\n  signout: () => dispatch(signout())\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SidebarMax)\n","import React, { Fragment } from 'react'\nimport MediaQuery from 'react-responsive'\n\nimport SidebarMin from './SidebarMin'\nimport SidebarMax from './SidebarMax'\n\nconst Sidebar = (props) => (\n  <Fragment>\n    <MediaQuery maxWidth={800}>\n      <SidebarMin {...props} />\n    </MediaQuery>\n    <MediaQuery minWidth={801}>\n      <SidebarMax {...props} />\n    </MediaQuery>\n  </Fragment>\n)\n\nexport default Sidebar\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { Redirect } from 'react-router-dom'\nimport { Button, TextField } from 'qwant-research-components'\n\nimport { updateUser, setNotification } from '../../actions'\nimport { Avatar } from '../../components'\nimport { isName, isUsername } from '../../library/validators'\nimport { isUsernameAlreadyTaken, compressImage, MAX_IMAGE_SIZE } from '../../library/utils'\n\nimport styles from './Settings.module.scss'\n\nclass Settings extends React.Component {\n  constructor (props) {\n    super(props)\n\n    this.state = {\n      image: '',\n      lastname: '',\n      firstname: '',\n      username: ''\n    }\n\n    this.hasChanged = false\n    this.validate = this.validate.bind(this)\n    this.isValid = this.isValid.bind(this)\n    this.handleKeyUp = this.handleKeyUp.bind(this)\n  }\n\n  componentDidMount () {\n    const { user } = this.props\n    if (!user) return\n\n    this.setState({\n      image: user.image,\n      lastname: user.lastname,\n      firstname: user.firstname,\n      username: user.username\n    })\n  }\n\n  isValid (fieldName) {\n    const { id } = this.props.user\n    const field = this.state[fieldName]\n    switch (fieldName) {\n      case 'lastname': return isName(field)\n      case 'firstname': return isName(field)\n      case 'username': return isUsername(field) && !isUsernameAlreadyTaken(field, id)\n      case 'image': return true\n      default: return false\n    }\n  }\n\n  getUsernameLabel (...labels) {\n    const username = this.state['username']\n\n    if (this.isValid('username')) {\n      return labels[0]\n    }\n\n    return isUsernameAlreadyTaken(username) ? labels[1] : labels[2]\n  }\n\n  onChange (field, event) {\n    const value = event.target.value.trim()\n    this.hasChanged = true\n    this.setState({\n      [field]: value\n    })\n  }\n\n  async onImageChange (event) {\n    const { setNotification } = this.props\n    const reader = new window.FileReader()\n    const file = event.target.files[0]\n    if (!file) {\n      return\n    }\n\n    const image = await compressImage(file)\n    if (image.size > MAX_IMAGE_SIZE) {\n      setNotification({ title: 'L\\'image sélectionnée est trop lourde. Veuillez en choisir une autre.', error: true })\n      return\n    }\n\n    reader.addEventListener('load', () => {\n      this.hasChanged = true\n      this.setState({ image: reader.result })\n    })\n\n    reader.readAsDataURL(image)\n  }\n\n  validate () {\n    if (!this.hasChanged) {\n      return\n    }\n\n    // Every fields should be valid\n    const isValid = Object.keys(this.state).every(key => this.isValid(key))\n    // If invalid, return\n    if (!isValid) {\n      // forceUpdate to show errors\n      return this.forceUpdate()\n    }\n\n    this.props.updateUser(this.props.user.id, this.state)\n    this.hasChanged = false\n  }\n\n  handleKeyUp (e) {\n    if (e.key === 'Enter') {\n      this.validate()\n    }\n  }\n\n  render () {\n    if (!this.props.user) return <Redirect to='/' />\n\n    return (\n      <div className={styles.Settings}>\n\n        <div className={styles.main}>\n          <p className='title'>Vos paramètres d'utilisateur</p>\n          <p className='subtitle'>Changez vos informations personnelles</p>\n          <div className={styles.avatar}>\n            <Avatar upload size={192} image={this.state.image} onChange={(e) => this.onImageChange(e)} />\n          </div>\n        </div>\n\n        <div className={styles.inputs}>\n          <TextField\n            error={!this.isValid('lastname')}\n            onKeyUp={this.handleKeyUp}\n            defaultValue={this.state.lastname}\n            onChange={(e) => this.onChange('lastname', e)}\n            label={this.isValid('lastname')\n              ? 'Nom (facultatif)'\n              : 'Le nom ne peut contenir que des caractères alphanumériques et des espaces.'}\n          />\n          <TextField\n            error={!this.isValid('firstname')}\n            onKeyUp={this.handleKeyUp}\n            defaultValue={this.state.firstname}\n            onChange={(e) => this.onChange('firstname', e)}\n            label={this.isValid('firstname')\n              ? 'Prénom (facultatif)'\n              : 'Le prénom ne peut contenir que des caractères alphanumériques et des espaces.'}\n          />\n          <TextField\n            error={!this.isValid('username')}\n            onKeyUp={this.handleKeyUp}\n            defaultValue={this.state.username}\n            onChange={(e) => this.onChange('username', e)}\n            label={this.getUsernameLabel(\n              'Pseudo (affiché)',\n              'Pseudo déjà utilisé. Veuillez en choisir un autre.',\n              'Le pseudo ne doit pas contenir d\\'espaces, et peut contenir les caractères spéciaux suivants: !?$#@()-*'\n            )}\n          />\n        </div>\n\n        <div className={styles.sidebar}>\n          <Button width={200} secondary={!this.hasChanged} label='SAUVEGARDER' onClick={this.validate} />\n        </div>\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = state => ({\n  user: state.masq.currentUser\n})\n\nconst mapDispatchToProps = dispatch => ({\n  updateUser: (id, user) => dispatch(updateUser(id, user)),\n  setNotification: (notif) => dispatch(setNotification(notif))\n})\n\nSettings.propTypes = {\n  user: PropTypes.object,\n  updateUser: PropTypes.func,\n  setNotification: PropTypes.func\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Settings)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { Redirect } from 'react-router-dom'\nimport { Card, Button } from 'qwant-research-components'\n\nimport { SyncDevice } from '../../modals'\n\nimport styles from './Devices.module.scss'\n\nclass Devices extends React.Component {\n  constructor (props) {\n    super(props)\n    this.state = { addDevice: false }\n    this.handleAddDeviceClick = this.handleAddDeviceClick.bind(this)\n    this.renderSyncModal = this.renderSyncModal.bind(this)\n    this.handleSyncModalClosed = this.handleSyncModalClosed.bind(this)\n  }\n\n  handleAddDeviceClick () {\n    this.setState({ addDevice: true })\n  }\n\n  handleSyncModalClosed () {\n    this.setState({ addDevice: false })\n  }\n\n  renderSyncModal () {\n    return this.state.addDevice ? <SyncDevice onClose={this.handleSyncModalClosed} /> : false\n  }\n\n  render () {\n    const { user, devices } = this.props\n\n    if (!user) return <Redirect to='/' />\n\n    return (\n      <div className={styles.Devices}>\n        <div className={styles.main}>\n          {this.renderSyncModal()}\n          <p className='title'>Mes Appareils</p>\n          <p className='subtitle'>Retrouvez la liste de vos appareils connectés à Masq</p>\n          {devices.map((device, index) => (\n            <div key={index} className={styles.Card}>\n              <Card minHeight={64} title={device.name} color={device.color} description={device.description} />\n            </div>\n          ))}\n        </div>\n\n        <div className={styles.sidebar}>\n          <Button secondary label='Ajouter un appareil (bientôt)' />\n        </div>\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  user: state.masq.currentUser,\n  devices: state.masq.devices\n})\n\nDevices.propTypes = {\n  user: PropTypes.object,\n  devices: PropTypes.arrayOf(PropTypes.object)\n}\n\nexport default connect(mapStateToProps)(Devices)\n","export { default as Login } from './Login'\nexport { default as Apps } from './Apps'\nexport { default as Sidebar } from './Sidebar'\nexport { default as Settings } from './Settings'\nexport { default as Devices } from './Devices'\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Settings\":\"Settings_Settings__2bGKW\",\"titleContainer\":\"Settings_titleContainer__Q_pGq\",\"inputs\":\"Settings_inputs__1NjVV\",\"fields\":\"Settings_fields__3aGf-\",\"TextInput\":\"Settings_TextInput__4_v0n\",\"button-container\":\"Settings_button-container__2o5Y6\",\"parameters\":\"Settings_parameters__3pUx0\",\"sidebar\":\"Settings_sidebar__1TH_C\",\"appSettings\":\"Settings_appSettings__2fdbG\",\"buttons\":\"Settings_buttons__27ct6\",\"exportButton\":\"Settings_exportButton__3VNoZ\",\"avatar\":\"Settings_avatar__2xlA5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Devices\":\"Devices_Devices__3xseY\",\"main\":\"Devices_main__BkSsd\",\"Card\":\"Devices_Card__2NXMk\",\"sidebar\":\"Devices_sidebar__28aMe\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"QRCode\":\"QRCodeModal_QRCode__3AeuM\",\"title\":\"QRCodeModal_title__ewyCo\",\"description\":\"QRCodeModal_description__3Kgtn\",\"loader\":\"QRCodeModal_loader__EoEMX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"PermanentStorage\":\"PersistentStorageRequest_PermanentStorage__3Xkha\",\"title\":\"PersistentStorageRequest_title__34ZE2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Apps\":\"Apps_Apps__2G1xS\",\"Card\":\"Apps_Card__1FgkF\"};","import signalhub from 'signalhubws'\nimport swarm from 'webrtc-swarm'\nimport pump from 'pump'\nimport uuidv4 from 'uuid/v4'\nimport * as common from 'masq-common'\n\nimport { isUsernameAlreadyTaken } from './utils'\n\nconst { encrypt, decrypt, importKey, exportKey, genAESKey, genEncryptedMasterKeyAndNonce, decryptMasterKeyAndNonce, genRandomBuffer } = common.crypto\nconst { dbReady, createPromisifiedHyperDB, put, get } = common.utils\n\nconst { ERRORS, MasqError, checkObject } = common.errors\n\nconst HUB_URLS = process.env.REACT_APP_SIGNALHUB_URLS.split(',')\n\nconst swarmOpts = process.env.NODE_ENV === 'test'\n  ? { wrtc: require('wrtc') }\n  : {}\n\nconst requiredParametersDevice = [\n  'name'\n]\n\nconst requiredParametersApp = [\n  'name',\n  'description',\n  'appId'\n]\n\nconst requiredParametersProfile = [\n  'username',\n  'firstname',\n  'lastname',\n  'password',\n  'image'\n]\n\n/**\n * Open or create a hyperdb instance\n * @param {string} name The indexeddb store name\n */\nconst openOrCreateDB = (name) => {\n  return createPromisifiedHyperDB(name)\n}\n\nclass Masq {\n  constructor () {\n    this.profileId = null\n    this.profileDB = null\n\n    this.appsDBs = {}\n    this.swarms = {}\n    this.hubs = {}\n\n    this.sw = null // sw used during login and registration\n    this.hub = null\n    this.key = null\n    this.masterKey = null\n    this.peer = null\n    this.app = null\n  }\n\n  /**\n   * Open and replicate a profile database\n   */\n  async openProfile (profileId, passphrase) {\n    if (!profileId) throw new MasqError(ERRORS.MISSING_PROFILE_ID)\n\n    // close existing profile, if any\n    this.closeProfile()\n\n    this.profileId = profileId\n    this.profileDB = openOrCreateDB(profileId)\n\n    const protectedMK = await this._getProtectedMK()\n    try {\n      const { masterKey, nonce } = await decryptMasterKeyAndNonce(passphrase, protectedMK)\n      this.masterKey = await importKey(masterKey)\n      this.nonce = nonce\n    } catch (error) {\n      this.closeProfile()\n      throw new MasqError(ERRORS.INVALID_PASSPHRASE)\n    }\n\n    await dbReady(this.profileDB)\n    this._startReplicate(this.profileDB)\n\n    const apps = await this.getApps()\n    apps.forEach(app => {\n      const dbName = profileId + '-' + app.id\n      const db = openOrCreateDB(dbName)\n      this.appsDBs[dbName] = db\n      db.on('ready', () => this._startReplicate(db))\n    })\n\n    const profile = await this.getAndDecrypt('/profile')\n    return profile\n  }\n\n  async closeProfile () {\n    this._stopAllReplicates()\n    this.profileDB = null\n    this.masterKey = null\n    this.nonce = null\n    this.profileId = null\n    this.appsDBs = {}\n  }\n\n  /**\n   * Create a new profile DB\n   * @param {object} profile The new profile to add\n   */\n  async addProfile (profile) {\n    checkObject(profile, requiredParametersProfile)\n\n    const isUsernameTaken = await isUsernameAlreadyTaken(profile.username)\n    if (isUsernameTaken) { throw new MasqError(ERRORS.USERNAME_ALREADY_TAKEN) }\n\n    const id = uuidv4()\n    const protectedMK = await genEncryptedMasterKeyAndNonce(profile.password)\n\n    const { masterKey, nonce } = await decryptMasterKeyAndNonce(profile.password, protectedMK)\n\n    this.masterKey = await importKey(masterKey)\n\n    const publicProfile = {\n      username: profile.username,\n      image: profile.image,\n      id: id\n    }\n    const privateProfile = {\n      ...publicProfile,\n      firstname: profile.firstname,\n      lastname: profile.lastname\n    }\n\n    // Create a DB for this profile\n    const db = openOrCreateDB(id)\n    await dbReady(db)\n\n    // we do not use this.encryptAndPut because this value is not encrypted\n    await db.putAsync('/profile/protectedMK', protectedMK)\n    // We do not use this.encryptAndPut method because the master key\n    // is not stored in this.profileDB (only set in openProfile)\n    await put(db, this.masterKey, nonce, '/profile', privateProfile)\n    this._setProfileToLocalStorage(publicProfile)\n    return privateProfile\n  }\n\n  /**\n   * Get a value\n   * @param {string} key - Key\n   * @returns {Promise<Object>}\n   */\n  async getAndDecrypt (key) {\n    this._checkProfile()\n    const dec = await get(this.profileDB, this.masterKey, this.nonce, key)\n    return dec\n  }\n\n  /**\n   * Put a new value in the current profile database\n   * The db parameter is only needed when this.profileDB is not set\n   * @param {string} key - Key\n   * @param {Object} value - The value to insert\n   * @returns {Promise}\n   */\n  async encryptAndPut (key, value) {\n    this._checkProfile()\n    await put(this.profileDB, this.masterKey, this.nonce, key, value)\n  }\n\n  /**\n   * Get public profiles from localstorage (id, username, and )\n   */\n  async getProfiles () {\n    return this._getProfilesFromLocalStorage()\n  }\n\n  /**\n   * Get private profile from hyperdb\n   */\n  async getProfile (profileId) {\n    const profile = await this.getAndDecrypt('/profile')\n    return profile\n  }\n\n  /**\n   * Update an existing profile\n   * @param {object} profile The updated profile\n   */\n  async updateProfile (profile) {\n    // TODO: Check profile\n    this._checkProfile()\n    const id = profile.id\n    if (!id) throw new MasqError(ERRORS.MISSING_PROFILE_ID)\n\n    const isUsernameTaken = await isUsernameAlreadyTaken(profile.username, id)\n    if (isUsernameTaken) { throw new MasqError(ERRORS.USERNAME_ALREADY_TAKEN) }\n\n    const privateProfile = await this.getProfile(id)\n    // First update private profile\n    const updatedPrivateProfile = { ...privateProfile, ...profile }\n    // Extract public profile from up-to-date profile\n    const updatePublicProfile = {\n      username: updatedPrivateProfile.username,\n      image: updatedPrivateProfile.image,\n      id: id\n    }\n\n    await this.encryptAndPut('/profile', updatedPrivateProfile)\n    this._setProfileToLocalStorage(updatePublicProfile)\n  }\n\n  /**\n   * Add an app to a specified profile\n   * @param {object} app The app\n   */\n  addApp (app) {\n    checkObject(app, requiredParametersApp)\n    return this._createResource('apps', app)\n  }\n\n  /**\n   * Add a device to a specified profile\n   * @param {object} device The device\n   */\n  addDevice (device) {\n    checkObject(device, requiredParametersDevice)\n    return this._createResource('devices', device)\n  }\n\n  /**\n   * Get all apps of the current profile\n   */\n  getApps () {\n    this._checkProfile()\n    return this._getResources('apps')\n  }\n\n  /**\n   * Get all devices of the current profile\n   */\n  getDevices () {\n    this._checkProfile()\n    return this._getResources('devices')\n  }\n\n  /**\n   * Update an app\n   * @param {object} app The updated app\n   */\n  async updateApp (app) {\n    this._checkProfile()\n    await this._updateResource('apps', app)\n  }\n\n  /**\n   * Update a device\n   * @param {object} device The updated device\n   */\n  async updateDevice (device) {\n    this._checkProfile()\n    await this._updateResource('devices', device)\n  }\n\n  /**\n   * Connect to a user-app channel and answer if\n   * the user-app is authorized or not.\n   * This method should be called only once the user is logged in\n   * @param {string} channel The channel to connect\n   * @param {string} rawKey The encryption key, base64 encoded\n   * @param {string} appId The app id (url for instance)\n   */\n  async handleUserAppLogin (channel, rawKey, appId) {\n    return new Promise(async (resolve, reject) => {\n      this.appId = appId\n      this._checkProfile()\n      this.key = await importKey(Buffer.from(rawKey, 'base64'))\n\n      const sendAuthorized = async (peer, userAppDbId, userAppDEK, username, profileImage, userAppNonce) => {\n        const data = { msg: 'authorized', userAppDbId, userAppDEK, username, profileImage, userAppNonce }\n        const encryptedMsg = await encrypt(this.key, data, 'base64')\n        peer.send(JSON.stringify(encryptedMsg))\n      }\n\n      const sendNotAuthorized = async (peer) => {\n        const data = { msg: 'notAuthorized' }\n        const encryptedMsg = await encrypt(this.key, data, 'base64')\n        peer.send(JSON.stringify(encryptedMsg))\n      }\n\n      this.hub = signalhub(channel, HUB_URLS)\n      this.sw = swarm(this.hub, swarmOpts)\n\n      this.sw.on('disconnect', async () => {\n        await this._closeUserAppConnection()\n        return reject(new MasqError(ERRORS.DISCONNECTED_DURING_LOGIN))\n      })\n\n      this.sw.once('peer', async (peer) => {\n        this.peer = peer\n\n        peer.on('error', async (err) => {\n          await this._closeUserAppConnection()\n          return reject(err)\n        })\n\n        const apps = await this.getApps()\n        const app = apps.find(app => app.appId === appId)\n\n        try {\n          if (app) {\n            const privateProfile = await this.getProfile(this.profileId)\n            await sendAuthorized(peer, app.id, app.appDEK, privateProfile.username, privateProfile.image, app.appNonce)\n          } else {\n            await sendNotAuthorized(peer)\n          }\n        } catch (e) {\n          await this._closeUserAppConnection()\n          return reject(new MasqError(ERRORS.DISCONNECTED_DURING_LOGIN))\n        }\n\n        peer.once('data', async (data) => {\n          const json = await decrypt(this.key, JSON.parse(data), 'base64')\n\n          if (json.msg === 'connectionEstablished') {\n            await this._closeUserAppConnection()\n            return resolve({ isConnected: true })\n          } else if (json.msg === 'registerUserApp') {\n            const { name, description, imageURL } = json\n            this.app = { name, description, imageURL }\n            resolve({ isConnected: false, ...this.app })\n          } else {\n            await this._closeUserAppConnection()\n            reject(new MasqError(ERRORS.INVALID_DATA))\n          }\n        })\n      })\n    })\n  }\n\n  /**\n   * Exchange messages with a user-app to register it.\n   * It will create a new hyperdb with a given id.\n   * Then, the user-app send its local key to authorize.\n   * This method should be called only once the user is logged in\n   * @param {boolean} isGranted True if the app is authorized\n   */\n  async handleUserAppRegister (isGranted) {\n    return new Promise(async (resolve, reject) => {\n      this._checkProfile()\n\n      let dbName = ''\n\n      const sendAccessRefused = async (peer) => {\n        const data = { msg: 'masqAccessRefused' }\n        const encryptedMsg = await encrypt(this.key, data, 'base64')\n        peer.send(JSON.stringify(encryptedMsg))\n      }\n\n      const sendAccessGranted = async (peer, dbKey, userAppDbId, userAppDEK, username, profileImage, userAppNonce) => {\n        const data = { msg: 'masqAccessGranted', key: dbKey, userAppDbId, userAppDEK, username, profileImage, userAppNonce }\n        const encryptedMsg = await encrypt(this.key, data, 'base64')\n        peer.send(JSON.stringify(encryptedMsg))\n      }\n\n      const sendWriteAccessGranted = async (peer) => {\n        const data = { msg: 'writeAccessGranted' }\n        const encryptedMsg = await encrypt(this.key, data, 'base64')\n        peer.send(JSON.stringify(encryptedMsg))\n      }\n\n      const handleData = async (peer, data) => {\n        const json = await decrypt(this.key, JSON.parse(data), 'base64')\n        const { msg } = json\n        // TODO: Error if  missing params\n\n        if (msg === 'requestWriteAccess') {\n          const userAppKey = Buffer.from(json.key, 'hex')\n          try {\n            await this.appsDBs[dbName].authorizeAsync(userAppKey)\n          } catch (err) {\n            throw new MasqError(ERRORS.AUTHORIZE_DB_KEY_FAILED)\n          }\n          await sendWriteAccessGranted(peer)\n          this.sw.close()\n          return resolve()\n        }\n      }\n\n      if (!isGranted) {\n        await sendAccessRefused(this.peer)\n        await this._closeUserAppConnection()\n        return resolve()\n      }\n\n      const apps = await this.getApps()\n      const app = apps.find(app => app.appId === this.appId)\n      const appDEK = app ? app.appDEK : await this._genAppDEK()\n      const appNonce = app ? app.appNonce : await this._genNonce()\n\n      const id = app ? app.id : await this.addApp({\n        ...this.app, appId: this.appId, appDEK, appNonce\n      })\n\n      const privateProfile = await this.getProfile(this.profileId)\n\n      dbName = this.profileId + '-' + id\n      const db = openOrCreateDB(dbName)\n      this.appsDBs[dbName] = db\n      db.on('ready', async () => {\n        this._startReplicate(db)\n        await sendAccessGranted(this.peer, db.key.toString('hex'), id, appDEK, privateProfile.username, privateProfile.image, appNonce)\n      })\n      this.peer.on('data', (data) => handleData(this.peer, data))\n    })\n  }\n\n  /**\n   * Private methods\n   */\n\n  /**\n   * Generate a User app Data Encryption Key, during the register\n   * of a new app, this info is added alongside this the appId (user\n   * app database id) during the masqAccessGranted message and authorized\n   * message\n   * @returns {String} -The secret key in hex format\n   */\n  async _genAppDEK () {\n    const key = await genAESKey(true, 'AES-GCM', 128)\n    const extractedKey = await exportKey(key)\n    const hexKey = Buffer.from(extractedKey).toString('hex')\n    return hexKey\n  }\n\n  /**\n   * Generate a User app nonce, during the register\n   * of a new app, this info is added alongside the appId (user\n   * app database id) during the masqAccessGranted message and authorized\n   * message.\n   * The nonce is used to hash the keys of the user-app database\n   * @returns {String} -The nonce key in hex format\n   */\n  async _genNonce () {\n    return genRandomBuffer(16, 'hex')\n  }\n\n  async _decryptValue (ciphertext) {\n    let decryptedMsg = await decrypt(this.masterKey, ciphertext)\n    return decryptedMsg\n  }\n\n  async _encryptValue (plaintext) {\n    let encryptedMsg = await encrypt(this.masterKey, plaintext)\n    return encryptedMsg\n  }\n\n  async _getProtectedMK () {\n    this._checkProfile()\n    const protectedMK = await this.profileDB.getAsync('/profile/protectedMK')\n    return protectedMK.value\n  }\n\n  async _createResource (name, res) {\n    const node = await this.getAndDecrypt(`/${name}`)\n    const ids = node || []\n    const id = uuidv4()\n    res['id'] = id\n\n    /* TODO: define a batch method to encrypt and batch in masq-common */\n    await this.encryptAndPut(`/${name}`, [...ids, id])\n    await this.encryptAndPut(`/${name}/${id}`, res)\n\n    return id\n  }\n\n  async _getResources (name) {\n    const node = await this.getAndDecrypt(`/${name}`)\n    if (!node) return []\n\n    const ids = node\n\n    const resourcePromises = ids.map(async (id) => {\n      const val = await this.getAndDecrypt(`/${name}/${id}`)\n      return val\n    })\n    const resources = await Promise.all(resourcePromises)\n    return resources\n  }\n\n  _updateResource (name, res) {\n    const id = res.id\n    if (!id) throw new MasqError(ERRORS.MISSING_RESOURCE_ID)\n    return this.encryptAndPut(`/${name}/${id}`, res)\n  }\n\n  _setProfileToLocalStorage (profile) {\n    const id = profile.id\n    if (!id) throw new MasqError(ERRORS.MISSING_PROFILE_ID)\n\n    window.localStorage.setItem(id, JSON.stringify({\n      id: id,\n      username: profile.username,\n      image: profile.image\n    }))\n  }\n\n  _getProfilesFromLocalStorage () {\n    const ids = Object.keys(window.localStorage)\n    if (!ids) return []\n\n    const profiles = ids.map(id =>\n      JSON.parse(window.localStorage.getItem(id))\n    )\n\n    return profiles\n  }\n\n  /**\n   * Replicate a database in a swarm using\n   * db.discoveryKey as channel name\n   */\n  _startReplicate (db) {\n    const discoveryKey = db.discoveryKey.toString('hex')\n    this.hubs[discoveryKey] = signalhub(discoveryKey, HUB_URLS)\n    this.swarms[discoveryKey] = swarm(this.hubs[discoveryKey], swarmOpts)\n    this.swarms[discoveryKey].on('peer', peer => {\n      const stream = db.replicate({ live: true })\n      pump(peer, stream, peer)\n    })\n  }\n\n  _stopAllReplicates () {\n    Object.values(this.swarms).forEach(sw => sw.close())\n    this.swarms = {}\n    this.hubs = {}\n  }\n\n  _checkProfile () {\n    if (!this.profileDB) throw new MasqError(ERRORS.PROFILE_NOT_OPENED)\n  }\n\n  _closeUserAppConnection () {\n    return new Promise((resolve, reject) => {\n      this.sw.on('close', () => {\n        this.hub = null\n        this.peer = null\n        this.app = null\n        // FIXME: do not clear this.key , as messages could\n        // could still be sending while the connection is closing\n        return resolve()\n      })\n      this.sw.close()\n    })\n  }\n}\n\nexport default Masq\n"],"sourceRoot":""}